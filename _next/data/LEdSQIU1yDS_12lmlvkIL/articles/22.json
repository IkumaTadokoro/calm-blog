{"pageProps":{"issue":{"body":"","bodyHTML":"","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22/comments","created_at":"2022-06-04T22:42:00Z","events_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22/events","html_url":"https://github.com/IkumaTadokoro/diary/issues/22","id":1260906931,"labels":[],"labels_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHWTPVs5LJ-mz","number":22,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22/reactions"},"repository_url":"https://api.github.com/repos/IkumaTadokoro/diary","state":"open","state_reason":null,"timeline_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22/timeline","title":"2022-06-05","updated_at":"2022-06-04T22:42:00Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},"issueComments":[{"body":"Denoの公式マニュアル簡単に検索できたらいいのにな〜。Dashだとできるんかな\n","bodyHTML":"<p>Denoの公式マニュアル簡単に検索できたらいいのにな〜。Dashだとできるんかな</p>\n","author_association":"OWNER","created_at":"2022-06-04T22:51:15Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146697076","id":1146697076,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWTV0","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146697076/reactions"},"updated_at":"2022-06-04T22:51:15Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146697076","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"[Dash\\-User\\-Contributions/docsets/Deno at master · Kapeli/Dash\\-User\\-Contributions](https://github.com/Kapeli/Dash-User-Contributions/tree/master/docsets/Deno#readme)\n\nDashはDocsetがありました。\n","bodyHTML":"<p><a href=\"https://github.com/Kapeli/Dash-User-Contributions/tree/master/docsets/Deno#readme\" rel=\"nofollow\">Dash-User-Contributions/docsets/Deno at master · Kapeli/Dash-User-Contributions</a></p>\n<p>DashはDocsetがありました。</p>\n","author_association":"OWNER","created_at":"2022-06-04T22:54:11Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146697315","id":1146697315,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWTZj","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146697315/reactions"},"updated_at":"2022-06-04T22:54:11Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146697315","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"denoが「denou」だからサブタイトルが電王なのか\n\nhttps://zenn.dev/kawarimidoll/articles/5559a185156bf4#%E5%A7%8B%E3%81%BE%E3%82%8A%E3%81%AF-%E3%81%84%E3%81%A4%E3%82%82-%E3%81%A8%E3%81%A4zenn\n","bodyHTML":"<p>denoが「denou」だからサブタイトルが電王なのか</p>\n<p><div class=\"embed-zenn-link\"><iframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fzenn.dev%2Fkawarimidoll%2Farticles%2F5559a185156bf4%23%25E5%25A7%258B%25E3%2581%25BE%25E3%2582%258A%25E3%2581%25AF-%25E3%2581%2584%25E3%2581%25A4%25E3%2582%2582-%25E3%2581%25A8%25E3%2581%25A4zenn\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"></iframe></div><a href=\"https://zenn.dev/kawarimidoll/articles/5559a185156bf4#%E5%A7%8B%E3%81%BE%E3%82%8A%E3%81%AF-%E3%81%84%E3%81%A4%E3%82%82-%E3%81%A8%E3%81%A4zenn\" style=\"display: none\">https://zenn.dev/kawarimidoll/articles/5559a185156bf4#始まりは-いつも-とつzenn</a></p>\n","author_association":"OWNER","created_at":"2022-06-04T23:55:38Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146705523","id":1146705523,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWVZz","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146705523/reactions"},"updated_at":"2022-06-04T23:55:38Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146705523","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"CLIツールの実装に役立ちそうなので、velociraptorのソースを読んでいく。\n\nhttps://github.com/jurassiscripts/velociraptor/tree/main/src\n\nヴェロキラプトルはジュラシック・パークによく出てくるやつ\n","bodyHTML":"<p>CLIツールの実装に役立ちそうなので、velociraptorのソースを読んでいく。</p>\n<p><div class=\"embed-zenn-link\"><iframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Ftree%2Fmain%2Fsrc\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"></iframe></div><a href=\"https://github.com/jurassiscripts/velociraptor/tree/main/src\" style=\"display: none\" rel=\"nofollow\">https://github.com/jurassiscripts/velociraptor/tree/main/src</a></p>\n<p>ヴェロキラプトルはジュラシック・パークによく出てくるやつ</p>\n","author_association":"OWNER","created_at":"2022-06-05T00:11:42Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146708317","id":1146708317,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWWFd","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146708317/reactions"},"updated_at":"2022-06-05T00:11:42Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146708317","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"ドキュメントによるとエントリポイントは`cli.ts`なので、そこをみていく。\n\n\n```bash\n$ deno install -qAn vr https://deno.land/x/velociraptor@1.4.0/cli.ts\n```\n\nhttps://velociraptor.run/docs/installation/#installing-from-%F0%9F%A6%95-deno.land\n\n---\n\n\n## cli.ts\n\nhttps://github.com/jurassiscripts/velociraptor/blob/main/cli.ts\n\n```typescript\nimport { loadConfig } from \"./src/load_config.ts\";\nimport { VrCommand } from \"./src/cli/commands/vr.ts\";\n\nif (import.meta.main) {\n  const config = await loadConfig();\n  new VrCommand(config).parse(Deno.args);\n}\n```\n\n`import.meta.main`は「このファイルが直接呼ばれた場合」のDeno版。\n`loadConfig`で設定を読み込んで、`VrCommand`を生成している。\n\nざっとドキュメントをみた感じだと、特に`vr config`的なコマンドはないので、`loadConfig`では何をやっているんだろう。\n次はこちらを覗くことにする。\n\n---\n\n## src/load_config.ts\n\nhttps://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts\n\n`loadConfig`は呼び出しディレクトリから再帰的に親を辿っていき、velociraptorの設定ファイルを読み取るような構造になっている。最終的に命名規約に則る設定ファイルがあれば、そのディレクトリと設定ファイルの内容を読み取る\n\nhttps://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts#L15\n\n内部で使用されている主なstd libとして次がある\n\n**path：pathの操作**\n\nhttps://deno.land/std@0.142.0/path\n\n**fs/exists:ファイルの存在チェック**\n\nhttps://deno.land/std@0.142.0/fs/exists.ts\n\n**encoding/_yaml/parse:yamlのparse**\n\nhttps://deno.land/std@0.142.0/encoding/_yaml/parse.ts\n\n次は実際のコマンドの方をみていく\n","bodyHTML":"<p>ドキュメントによるとエントリポイントは<code>cli.ts</code>なので、そこをみていく。</p>\n<div class=\"code-block-container\"><pre class=\"language-bash\"><code class=\"language-bash\">$ deno <span class=\"token function\">install</span> -qAn vr https://deno.land/x/velociraptor@1.4.0/cli.ts\n</code></pre></div><p><div class=\"embed-zenn-link\"><iframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fvelociraptor.run%2Fdocs%2Finstallation%2F%23installing-from-%25F0%259F%25A6%2595-deno.land\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"></iframe></div><a href=\"https://velociraptor.run/docs/installation/#installing-from-%F0%9F%A6%95-deno.land\" style=\"display: none\" rel=\"nofollow\">https://velociraptor.run/docs/installation/#installing-from-🦕-deno.land</a></p>\n<hr>\n<h2 id=\"cli.ts\"><a class=\"header-anchor-link\" href=\"#cli.ts\" aria-hidden=\"true\" rel=\"nofollow\"></a> cli.ts</h2>\n<p><div class=\"embed-zenn-link\"><iframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Fblob%2Fmain%2Fcli.ts\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"></iframe></div><a href=\"https://github.com/jurassiscripts/velociraptor/blob/main/cli.ts\" style=\"display: none\" rel=\"nofollow\">https://github.com/jurassiscripts/velociraptor/blob/main/cli.ts</a></p>\n<div class=\"code-block-container\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> loadConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./src/load_config.ts\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> VrCommand <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./src/cli/commands/vr.ts\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">loadConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">VrCommand</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>Deno<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div><p><code>import.meta.main</code>は「このファイルが直接呼ばれた場合」のDeno版。<br>\n<code>loadConfig</code>で設定を読み込んで、<code>VrCommand</code>を生成している。</p>\n<p>ざっとドキュメントをみた感じだと、特に<code>vr config</code>的なコマンドはないので、<code>loadConfig</code>では何をやっているんだろう。<br>\n次はこちらを覗くことにする。</p>\n<hr>\n<h2 id=\"src%2Fload_config.ts\"><a class=\"header-anchor-link\" href=\"#src%2Fload_config.ts\" aria-hidden=\"true\" rel=\"nofollow\"></a> src/load_config.ts</h2>\n<p><div class=\"embed-zenn-link\"><iframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Fblob%2Fmain%2Fsrc%2Fload_config.ts\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"></iframe></div><a href=\"https://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts\" style=\"display: none\" rel=\"nofollow\">https://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts</a></p>\n<p><code>loadConfig</code>は呼び出しディレクトリから再帰的に親を辿っていき、velociraptorの設定ファイルを読み取るような構造になっている。最終的に命名規約に則る設定ファイルがあれば、そのディレクトリと設定ファイルの内容を読み取る</p>\n<p><div class=\"embed-zenn-link\"><iframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Fblob%2Fmain%2Fsrc%2Fload_config.ts%23L15\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"></iframe></div><a href=\"https://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts#L15\" style=\"display: none\" rel=\"nofollow\">https://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts#L15</a></p>\n<p>内部で使用されている主なstd libとして次がある</p>\n<p><strong>path：pathの操作</strong></p>\n<p><div class=\"embed-zenn-link\"><iframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fdeno.land%2Fstd%400.142.0%2Fpath\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"></iframe></div><a href=\"https://deno.land/std@0.142.0/path\" style=\"display: none\" rel=\"nofollow\">https://deno.land/std@0.142.0/path</a></p>\n<p><strong>fs/exists:ファイルの存在チェック</strong></p>\n<p><div class=\"embed-zenn-link\"><iframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fdeno.land%2Fstd%400.142.0%2Ffs%2Fexists.ts\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"></iframe></div><a href=\"https://deno.land/std@0.142.0/fs/exists.ts\" style=\"display: none\" rel=\"nofollow\">https://deno.land/std@0.142.0/fs/exists.ts</a></p>\n<p><strong>encoding/_yaml/parse:yamlのparse</strong></p>\n<p><div class=\"embed-zenn-link\"><iframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fdeno.land%2Fstd%400.142.0%2Fencoding%2F_yaml%2Fparse.ts\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"></iframe></div><a href=\"https://deno.land/std@0.142.0/encoding/_yaml/parse.ts\" style=\"display: none\" rel=\"nofollow\">https://deno.land/std@0.142.0/encoding/_yaml/parse.ts</a></p>\n<p>次は実際のコマンドの方をみていく</p>\n","author_association":"OWNER","created_at":"2022-06-05T00:31:27Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146712169","id":1146712169,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWXBp","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146712169/reactions"},"updated_at":"2022-06-05T00:31:27Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146712169","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}}]},"__N_SSG":true}