---
author_association: OWNER
created_at: '2022-06-21T13:28:05Z'
html_url: https://github.com/IkumaTadokoro/diary/issues/39#issuecomment-1161749531
id: 1161749531
issue_url: https://api.github.com/repos/IkumaTadokoro/diary/issues/39
node_id: IC_kwDOHWTPVs5FPuQb
performed_via_github_app: 
reactions:
  "+1": 0
  "-1": 0
  confused: 0
  eyes: 0
  heart: 0
  hooray: 0
  laugh: 0
  rocket: 0
  total_count: 0
  url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1161749531/reactions
updated_at: '2022-06-21T13:28:05Z'
url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1161749531
user:
  avatar_url: https://avatars.githubusercontent.com/u/61409641?v=4
  events_url: https://api.github.com/users/IkumaTadokoro/events{/privacy}
  followers_url: https://api.github.com/users/IkumaTadokoro/followers
  following_url: https://api.github.com/users/IkumaTadokoro/following{/other_user}
  gists_url: https://api.github.com/users/IkumaTadokoro/gists{/gist_id}
  gravatar_id: ''
  html_url: https://github.com/IkumaTadokoro
  id: 61409641
  login: IkumaTadokoro
  node_id: MDQ6VXNlcjYxNDA5NjQx
  organizations_url: https://api.github.com/users/IkumaTadokoro/orgs
  received_events_url: https://api.github.com/users/IkumaTadokoro/received_events
  repos_url: https://api.github.com/users/IkumaTadokoro/repos
  site_admin: false
  starred_url: https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}
  subscriptions_url: https://api.github.com/users/IkumaTadokoro/subscriptions
  type: User
  url: https://api.github.com/users/IkumaTadokoro

---
## v-modelの修飾子

### Vue2系

以下の3種類がある。

- `.trim`：入力から空白を取り除く
- `.number`：入力をnumberへ型キャストする。
- `.lazy`：`input`イベントではなく、`change`イベントでイベントを発火する

### Vue3系

#### カスタム修飾子

上記に加えて、カスタム修飾子が定義できるようになった。

親コンポーネント

```vue
<script setup lang="ts">
import { ref } from 'vue'
import MyVModelModifier from './components/MyVModelModifier.vue'
const text = ref('')
</script>

<template>
  <MyVModelModifier v-model.capitalize="text"></MyVModelModifier>
  {{ text }}
</template>
```

子コンポーネント

```vue
<template>
  <input type="text" :value="modelValue" @input="emitValue" />
</template>

<script setup>
const props = defineProps({
  modelValue: String,
  modelModifiers: { default: () => ({}) }
})

const emit = defineEmits(['update:modelValue'])

const emitValue = (e) => {
  let value = e.target.value
  if (props.modelModifiers.capitalize) {
    value = value.charAt(0).toUpperCase() + value.slice(1)
  }
  emit('update:modelValue', value)
}
</script>
```

`v-model.modifier`の形式で記述すると、`modelModifiers`というpropが使用できるようになる。例えば`capitalize`をmodifierの位置にしているすると

```vue
modelModifiers = {
  capitalize: true
}
```

という値が設定される。Vue側で提供するのはこのフラグ的な機能のみで、これを利用して実際にv-modelに紐づいたイベントで期待した処理を実装する。
