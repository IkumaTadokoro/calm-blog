---
author_association: OWNER
created_at: '2022-08-28T02:06:47Z'
html_url: https://github.com/IkumaTadokoro/diary/issues/74#issuecomment-1229357137
id: 1229357137
issue_url: https://api.github.com/repos/IkumaTadokoro/diary/issues/74
node_id: IC_kwDOHWTPVs5JRoBR
performed_via_github_app: 
reactions:
  "+1": 0
  "-1": 0
  confused: 0
  eyes: 0
  heart: 0
  hooray: 0
  laugh: 0
  rocket: 0
  total_count: 0
  url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1229357137/reactions
updated_at: '2022-08-28T02:06:47Z'
url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1229357137
user:
  avatar_url: https://avatars.githubusercontent.com/u/61409641?v=4
  events_url: https://api.github.com/users/IkumaTadokoro/events{/privacy}
  followers_url: https://api.github.com/users/IkumaTadokoro/followers
  following_url: https://api.github.com/users/IkumaTadokoro/following{/other_user}
  gists_url: https://api.github.com/users/IkumaTadokoro/gists{/gist_id}
  gravatar_id: ''
  html_url: https://github.com/IkumaTadokoro
  id: 61409641
  login: IkumaTadokoro
  node_id: MDQ6VXNlcjYxNDA5NjQx
  organizations_url: https://api.github.com/users/IkumaTadokoro/orgs
  received_events_url: https://api.github.com/users/IkumaTadokoro/received_events
  repos_url: https://api.github.com/users/IkumaTadokoro/repos
  site_admin: false
  starred_url: https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}
  subscriptions_url: https://api.github.com/users/IkumaTadokoro/subscriptions
  type: User
  url: https://api.github.com/users/IkumaTadokoro

---
これもしかして、oldブランチに切り替えたらうまくいったりするのか？

```bash
go install github.com/chromedp/cdproto-gen@cdproto-gen@old
```

```bash
$ cdproto-gen

easyjson-bootstrap693351085.go:14:3: no required module provides package github.com/chromedp/cdproto/media: go.mod file not found in current directory or any parent directory; see 'go help modules'
# こんなのがめっちゃでている
```

とはいえ、oldブランチに切り替えたら今まで落ちているところも落ちないようになった。
少なくとも

https://github.com/chromedp/pdlgen/blob/abc6091f7244e5c70d1a9ef38f70ec9a6b209d39/main.go#L283

ここまで到達するようになった。後一息である。

https://github.com/mailru/easyjson

Goの構造体とJSONをリフレクションなしに簡潔かつ高速に変換できるパッケージ（リフレクションis何）。標準で`encoding/json`があるけど、それよりも早い。

---

pdlgenのREADMEに書いてあった

> The -out command-line option should point to the directory into which the github.com/chromedp/cdproto repository is cloned, so that easyjson can find the go.mod file and use it.

というわけで、このソースも落としてくる。

```bash
ghq get git@github.com:chromedp/cdproto.git
cdproto-gen -out=/Users/ikuma/src/github.com/chromedp/cdproto
```

これでやっと動いたよ...


