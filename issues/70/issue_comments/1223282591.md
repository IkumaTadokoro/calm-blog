---
author_association: OWNER
created_at: '2022-08-22T22:46:35Z'
html_url: https://github.com/IkumaTadokoro/diary/issues/70#issuecomment-1223282591
id: 1223282591
issue_url: https://api.github.com/repos/IkumaTadokoro/diary/issues/70
node_id: IC_kwDOHWTPVs5I6c-f
performed_via_github_app: 
reactions:
  "+1": 0
  "-1": 0
  confused: 0
  eyes: 0
  heart: 0
  hooray: 0
  laugh: 0
  rocket: 0
  total_count: 0
  url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1223282591/reactions
updated_at: '2022-08-22T22:46:35Z'
url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1223282591
user:
  avatar_url: https://avatars.githubusercontent.com/u/61409641?v=4
  events_url: https://api.github.com/users/IkumaTadokoro/events{/privacy}
  followers_url: https://api.github.com/users/IkumaTadokoro/followers
  following_url: https://api.github.com/users/IkumaTadokoro/following{/other_user}
  gists_url: https://api.github.com/users/IkumaTadokoro/gists{/gist_id}
  gravatar_id: ''
  html_url: https://github.com/IkumaTadokoro
  id: 61409641
  login: IkumaTadokoro
  node_id: MDQ6VXNlcjYxNDA5NjQx
  organizations_url: https://api.github.com/users/IkumaTadokoro/orgs
  received_events_url: https://api.github.com/users/IkumaTadokoro/received_events
  repos_url: https://api.github.com/users/IkumaTadokoro/repos
  site_admin: false
  starred_url: https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}
  subscriptions_url: https://api.github.com/users/IkumaTadokoro/subscriptions
  type: User
  url: https://api.github.com/users/IkumaTadokoro

---
## 1章

Cはもともとアセンブラの代替品だったそうな。ここら辺の経緯って全然知らんからこれだけでためになるな。

C99が1999年に定められたCの規格で、C11が2011年に定められたCの規格。

**Keep the spirit of C**

・プログラマーを信じなさい (Trust the programmer.)
・プログラマーが、 理由があって何かをしようとしているとき、それを妨げてはいけない (Don't prevent the programmer from doing what needs to be done.)
・言語を小さく、シンプルに保とう (Keep the language small and simple.)
・ある1つの操作のためには、たった1つの方法だけを提供しよう (Provide only one way to do an operation.)
・たとえ移植性が保証されなくても、高速にしよう(Make it fast, even if it is not guaranteed to be portable.)

> Cは、プログラマーは全知全能であるという理念のもとに設計されています。

なるほど、もともとアセンブラの代用としてUNIXのツヨツヨエンジニアが自分達のために作ったから、安全性とかはどうでもよくて、コンパイラを簡単に実装できるかと高速なコードを書けるかが売りなんだな。

---

アドレスはメモリの番地。変数を格納しているメモリ上の領域がオブジェクト、オブジェクトとして格納されるデータ型をオブジェクト型。

ポインタ型は他の型から派生することで存在する。これはGoのところの説明で読んだのと同じだと思う。

---

> 「*hoge_p」と書くとなんだか 「*hoge_p」 という変数を宣言しているように見えてしまうかもしれません。 しかしここで宣言している変数はあくまで、 hoge_pであり、その型が「intへのポインタ」型なのです。

そう、これがよくわかんないからこの本読んでいる感もある。

```c
// &はアドレス演算子
// %pでポインタの値を表示する
// %pに対してはvoidへのポインタを指定することになってる
printf("&hoge..%p\n", (void*)&hoge);
```

アドレスがポインタ型の値そのもの。

*は間接演算子。ポインタに*をつけることで、その指している先のものを表す。

あ〜、ポインタがアドレスを指すという感覚を頭の中でスッとイメージできると読みやすい。

とりあえずここまでは大丈夫そうだ！

---

- &や*は単項演算子
- これらは演算子の結果の式に代入することができる（演算子の結果の色が左辺値であるという）

```c
int *hoge_p;
```

これは演算子ではない！！！えええ...。これは区切り子の一つなんだと。

---

コラムを読んでいる。

```c
int hoge // 型 変数名
int *hoge_p // ポインタ型の宣言。
int* hoge_p // ポインタ型の宣言を型 変数名になるようにしてみる形
int* hoge_p, fuga_p 複数の型宣言で破綻する
```

> なぜなら、Cの宣言の構文は、もうどうしようもないほど不自然で、 奇ッ怪で、変態的な構文なのですから。

随所に出てくる筆者の主張が面白い笑

ここら辺の話、GoのブログのSyntaxについての記事にも同じような話があったような。

https://go.dev/blog/declaration-syntax

---

ポインタ演算すると、そのアドレスはそのポインタが指す型のサイズだけ増加する。

---

> Cのポインタについて説明すると、「なぜポインタなどというものを使わなければいけないのかがわからない」 と言う人がいます。

速度やハードウェア密着のプログラムを書かなくても、ポインタは必須。例として、関数から複数の値を返す、配列アクセス、LinkedListのようなデータ構造を表現するといったことが挙げられている。

C言語では複数の値を返す場合、そのポインタを渡して、それを経由して値を書き込んでもらう（え？え？）

> Cでは、こういうことはポインタを使わない限り実現できません。

Cにおける関数呼び出しでは引数を値渡ししている。だから関数側に実引数として渡したものは「値」だけが渡されて、その変数自体（つまりはアドレス値）は渡されない。

C++とかC#には参照渡しがあるけど、Cにはないので「ポインタを値渡し」する。

https://magazine.rubyist.net/articles/0032/0032-CallByValueAndCallByReference.html

これはRubyの解説記事。

---

ちょっと集中が切れたので、配列は今日の夜にしよう

