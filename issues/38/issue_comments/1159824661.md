---
author_association: OWNER
created_at: '2022-06-19T22:52:41Z'
html_url: https://github.com/IkumaTadokoro/diary/issues/38#issuecomment-1159824661
id: 1159824661
issue_url: https://api.github.com/repos/IkumaTadokoro/diary/issues/38
node_id: IC_kwDOHWTPVs5FIYUV
performed_via_github_app: 
reactions:
  "+1": 0
  "-1": 0
  confused: 0
  eyes: 0
  heart: 0
  hooray: 0
  laugh: 0
  rocket: 0
  total_count: 0
  url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1159824661/reactions
updated_at: '2022-06-19T22:52:41Z'
url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1159824661
user:
  avatar_url: https://avatars.githubusercontent.com/u/61409641?v=4
  events_url: https://api.github.com/users/IkumaTadokoro/events{/privacy}
  followers_url: https://api.github.com/users/IkumaTadokoro/followers
  following_url: https://api.github.com/users/IkumaTadokoro/following{/other_user}
  gists_url: https://api.github.com/users/IkumaTadokoro/gists{/gist_id}
  gravatar_id: ''
  html_url: https://github.com/IkumaTadokoro
  id: 61409641
  login: IkumaTadokoro
  node_id: MDQ6VXNlcjYxNDA5NjQx
  organizations_url: https://api.github.com/users/IkumaTadokoro/orgs
  received_events_url: https://api.github.com/users/IkumaTadokoro/received_events
  repos_url: https://api.github.com/users/IkumaTadokoro/repos
  site_admin: false
  starred_url: https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}
  subscriptions_url: https://api.github.com/users/IkumaTadokoro/subscriptions
  type: User
  url: https://api.github.com/users/IkumaTadokoro

---
CompositionAPIにおけるmodelコンポーネントオプションを検証する。

現状、valueとinputで値を変更できているので、Vue2でのデフォルト値は守られている。あとはmodelオプションがCompositionAPIでも利用できるか。

まずmodelオプションを定義すると値が変更できなくなることから、オプション自体は有効っぽい。

```
model: { prop: 'modelValue', event: 'update:modelUpdate' }
```

この状態でオプションに合わせて変更する値等を変えてみる。

```vue
<template>
  <div>
    <hr>
    <div className="form">
      <label htmlFor="name">{{ label }}</label>
      <input type="text" name="name" v-model="innerValue">
    </div>
    <p>value: {{ modelValue }}</p>
    <hr>
  </div>
</template>

<script>
import { computed } from '@vue/composition-api'

export default {
  name: 'MyInputComposition',
  model: { prop: 'modelValue', event: 'update:modelUpdate' },
  props: {
    label: {
      require: true,
      type: String
    },
    modelValue: {
      require: true,
      type: String
    }
  },
  setup (props, { emit }) {
    const innerValue = computed({
      get() {
        return props.modelValue
      },
      set(newValue) {
        emit('update:modelUpdate', newValue)
      }
    })

    return {
      innerValue
    }
  }
}
</script>

<style scoped>
.form {
  margin: 0 auto;
  padding: 0 2rem;
  display: flex;
  flex-direction: row;
}

.form label {
  flex: 3
}

.form input {
  flex: 7;
}
</style>
```

modelオプションが適用されていることを確認できた。
