---
author_association: OWNER
created_at: '2022-08-23T02:11:44Z'
html_url: https://github.com/IkumaTadokoro/diary/issues/71#issuecomment-1223435494
id: 1223435494
issue_url: https://api.github.com/repos/IkumaTadokoro/diary/issues/71
node_id: IC_kwDOHWTPVs5I7CTm
performed_via_github_app: 
reactions:
  "+1": 0
  "-1": 0
  confused: 0
  eyes: 0
  heart: 0
  hooray: 0
  laugh: 0
  rocket: 0
  total_count: 0
  url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1223435494/reactions
updated_at: '2022-08-23T02:11:44Z'
url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1223435494
user:
  avatar_url: https://avatars.githubusercontent.com/u/61409641?v=4
  events_url: https://api.github.com/users/IkumaTadokoro/events{/privacy}
  followers_url: https://api.github.com/users/IkumaTadokoro/followers
  following_url: https://api.github.com/users/IkumaTadokoro/following{/other_user}
  gists_url: https://api.github.com/users/IkumaTadokoro/gists{/gist_id}
  gravatar_id: ''
  html_url: https://github.com/IkumaTadokoro
  id: 61409641
  login: IkumaTadokoro
  node_id: MDQ6VXNlcjYxNDA5NjQx
  organizations_url: https://api.github.com/users/IkumaTadokoro/orgs
  received_events_url: https://api.github.com/users/IkumaTadokoro/received_events
  repos_url: https://api.github.com/users/IkumaTadokoro/repos
  site_admin: false
  starred_url: https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}
  subscriptions_url: https://api.github.com/users/IkumaTadokoro/subscriptions
  type: User
  url: https://api.github.com/users/IkumaTadokoro

---
多少ポインタ力が上がったところで、pdlgenのソースコードに戻ってきた。各DomainごとにGoのソースコードを作成する部分のリーディングである。

```go
for _, d := range domains {
	pkgName := genutil.PackageName(d)
	pkgOut := filepath.Join(pkgName, pkgName+".go")
```

rangeの書き方忘れた。

https://go-tour-jp.appspot.com/moretypes/16

この場合は、`domains`を反復し、反復ごとにindexとインデックスの場所の要素のコピーを返す（これって値渡しってこと？）

`domains`はこの関数`NewGoGenerator`の引数として渡されている

```go
func NewGoGenerator(domains []*pdl.Domain, basePkg string) (Emitter, error) {
```

おお、一昨日より解像度高いぞ。`domains`は`pdl.Domain`のポインタのスライス（言葉を正しく使えない）。

概要としてはDomainを渡して、それを元に定義ファイルを作成している感じ。

Domainってスクショとか、Pageとかのことだと思っているんだけど、間違っていると理解が厳しいので、一回PDLを確認する。

というかそもそもPDLって拡張子の事知らないから調べよう。

https://ja.wikipedia.org/wiki/%E3%83%9A%E3%83%BC%E3%82%B8%E8%A8%98%E8%BF%B0%E8%A8%80%E8%AA%9E

> ページ記述言語（ページきじゅつげんご、英: page description language、略称PDL）は、プリンターに対して描画を指示するためのプログラミング言語である。

なんで、Googleはこれで記述することを選んだんだろう（そういう意味ではJSONもそうかもだけど、ブラウザがJSと仲良いからわからんでもない）

https://github.com/ChromeDevTools/devtools-protocol/blob/master/pdl/browser_protocol.pdl

あ、なんか違うっぽいぞ。PDLはChrome Devtools Protocolのための独自記述の可能性があるな。

とりあえずDomainに関する認識はここで記述されている通り正しい。

https://chromedevtools.github.io/devtools-protocol/

Rust製のPDLパーサー

https://github.com/flier/rust-pdl

読み方ぷどる？って読むっぽい？

https://fileinfo.com/extension/pdl

Perl Data LanguageFileってのもあるな。
