---
author_association: OWNER
created_at: '2022-06-19T12:20:07Z'
html_url: https://github.com/IkumaTadokoro/diary/issues/37#issuecomment-1159709934
id: 1159709934
issue_url: https://api.github.com/repos/IkumaTadokoro/diary/issues/37
node_id: IC_kwDOHWTPVs5FH8Tu
performed_via_github_app: 
reactions:
  "+1": 0
  "-1": 0
  confused: 0
  eyes: 0
  heart: 0
  hooray: 0
  laugh: 0
  rocket: 0
  total_count: 0
  url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1159709934/reactions
updated_at: '2022-06-19T12:20:07Z'
url: https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1159709934
user:
  avatar_url: https://avatars.githubusercontent.com/u/61409641?v=4
  events_url: https://api.github.com/users/IkumaTadokoro/events{/privacy}
  followers_url: https://api.github.com/users/IkumaTadokoro/followers
  following_url: https://api.github.com/users/IkumaTadokoro/following{/other_user}
  gists_url: https://api.github.com/users/IkumaTadokoro/gists{/gist_id}
  gravatar_id: ''
  html_url: https://github.com/IkumaTadokoro
  id: 61409641
  login: IkumaTadokoro
  node_id: MDQ6VXNlcjYxNDA5NjQx
  organizations_url: https://api.github.com/users/IkumaTadokoro/orgs
  received_events_url: https://api.github.com/users/IkumaTadokoro/received_events
  repos_url: https://api.github.com/users/IkumaTadokoro/repos
  site_admin: false
  starred_url: https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}
  subscriptions_url: https://api.github.com/users/IkumaTadokoro/subscriptions
  type: User
  url: https://api.github.com/users/IkumaTadokoro

---
`model`はVue2.2から導入されたコンポーネントオプションの1つで、v-modelで紐づけられた、プロパティ名とイベント名を変更できる。

例えば、

```vue
<MyInputOptions v-model="title" />
```

のように親コンポーネントでカスタムコンポーネント`MyInputOptions`の呼び出しを行っているとする。

何も指定していない場合、

```vue
<MyInputOptions :value="title" @input="title = $event.target.value" />
```

と同じ意味になる。ここで子コンポーネントに次のような`model`オプションを追加する。

```vue
<script>
export default {
  model: {
    prop: "modelValue",
    event: "updateModel"
  }
}
</script>
```

こうすると、親コンポーネントのv-modelは次のように意味が変わる。

```vue
<MyInputOptions :modelValue="title"" @updateModel="title = $event.target.value" />
```

なので、例えば子コンポーネントで双方向算出プロパティを用いているとすると、computedの部分は次のようになる。

```diff vue
export default {
+ model: { prop: 'modelValue', event: 'modelUpdate' },
  props: {
-   value: {
+   modelValue: {
      require: true,
      type: String
    }
  },
// カスタムコンポーネント内のv-modelにinnerValueを指定している
  computed: {
    innerValue: {
      get() {
-        return this.value
+        return this.modelValue
      },
      set(newValue) {
-        this.$emit('input', newValue)
+        this.$emit('modelUpdate', newValue)
      }
    }
  }
}
```

親で指定しているvalueとeventが変わったのだから、それはそうなるやろうという変更だが、ちゃんと理解していないとハマりそう。
