<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>2022-06-05</title><meta name="next-head-count" content="3"/><link rel="preload" href="/diary/_next/static/css/d865616645a7b0fe.css" as="style"/><link rel="stylesheet" href="/diary/_next/static/css/d865616645a7b0fe.css" data-n-g=""/><link rel="preload" href="/diary/_next/static/css/fc9624fd4a486ef2.css" as="style"/><link rel="stylesheet" href="/diary/_next/static/css/fc9624fd4a486ef2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/diary/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/diary/_next/static/chunks/webpack-dc4034d98607b727.js" defer=""></script><script src="/diary/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/diary/_next/static/chunks/main-a03413948affdc5e.js" defer=""></script><script src="/diary/_next/static/chunks/pages/_app-5b4d6b2692b4593b.js" defer=""></script><script src="/diary/_next/static/chunks/582-d79da0492f1f9267.js" defer=""></script><script src="/diary/_next/static/chunks/pages/articles/%5BissueNumber%5D-4584e21e841751ac.js" defer=""></script><script src="/diary/_next/static/3edx1ijI3oWKji17VwY5S/_buildManifest.js" defer=""></script><script src="/diary/_next/static/3edx1ijI3oWKji17VwY5S/_ssgManifest.js" defer=""></script><script src="/diary/_next/static/3edx1ijI3oWKji17VwY5S/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><script>window.twttr=(function(f,b,g){var e,c=f.getElementsByTagName(b)[0],a=window.twttr||{};if(f.getElementById(g)){return a}e=f.createElement(b);e.id=g;e.src="https://platform.twitter.com/widgets.js";c.parentNode.insertBefore(e,c);a._e=[];a.ready=function(d){a._e.push(d)};return a}(document,"script","twitter-wjs"));</script><div class="min-h-screen flex flex-col"><header class="relative bg-gradient-to-r from-blue-700 via-blue-800 to-gray-900 md:mb-8"><div class="max-w-6xl mx-auto px-5"><nav class="py-12 md:mb-20 flex items-center justify-between md:px-12 px-2"><div><h1 class="text-white"><a class="text-2xl md:text-3xl tracking-wide font-bold" href="/diary">ikuma-t/diary</a></h1><p class="mt-4 text-sm text-slate-300">ikuma-tの作業ログです。</p></div><div><a class="text-white text-sm" href="https://github.com/IkumaTadokoro/diary/issues">Show on GitHub</a></div></nav></div><svg class="absolute w-full h-20 md:h-full top-32 left-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" preserveAspectRatio="none"><path d="M0 32L24 37.3C48 43 96 53 144 74.7C192 96 240 128 288 122.7C336 117 384 75 432 80C480 85 528 139 576 133.3C624 128 672 64 720 53.3C768 43 816 85 864 90.7C912 96 960 64 1008 48C1056 32 1104 32 1152 58.7C1200 85 1248 139 1296 133.3C1344 128 1392 64 1416 32L1440 0V171H1416C1392 171 1344 171 1296 171C1248 171 1200 171 1152 171C1104 171 1056 171 1008 171C960 171 912 171 864 171C816 171 768 171 720 171C672 171 624 171 576 171C528 171 480 171 432 171C384 171 336 171 288 171C240 171 192 171 144 171C96 171 48 171 24 171H0V32Z" fill="white"></path></svg></header><main class="z-10 flex-1 py-8"><div class="max-w-2xl mx-auto"><article class="znc markdown"><section class="block py-6 md:px-12 px-8 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-06-04T22:42:00Z" title="2022-06-04T22:42:00Z">2022-06-04 22:06:00</time><h1 class="font-bold text-slate-600">2022-06-05</h1></header><aside><p class="text-sm text-slate-400">Posted by <!-- --> at <!-- --><a href="https://github.com/IkumaTadokoro/diary/issues/22">#22</a>.<!-- --></p></aside><div></div></section><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-06-04T22:51:15Z" title="2022-06-04T22:51:15Z">2022-06-04 22:06:00</time></header><div><p>Denoの公式マニュアル簡単に検索できたらいいのにな〜。Dashだとできるんかな</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-06-04T22:54:11Z" title="2022-06-04T22:54:11Z">2022-06-04 22:06:00</time></header><div><p><a href="https://github.com/Kapeli/Dash-User-Contributions/tree/master/docsets/Deno#readme" rel="nofollow">Dash-User-Contributions/docsets/Deno at master · Kapeli/Dash-User-Contributions</a></p>
<p>DashはDocsetがありました。</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-06-04T23:55:38Z" title="2022-06-04T23:55:38Z">2022-06-04 23:06:00</time></header><div><p>denoが「denou」だからサブタイトルが電王なのか</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fzenn.dev%2Fkawarimidoll%2Farticles%2F5559a185156bf4%23%25E5%25A7%258B%25E3%2581%25BE%25E3%2582%258A%25E3%2581%25AF-%25E3%2581%2584%25E3%2581%25A4%25E3%2582%2582-%25E3%2581%25A8%25E3%2581%25A4zenn" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://zenn.dev/kawarimidoll/articles/5559a185156bf4#%E5%A7%8B%E3%81%BE%E3%82%8A%E3%81%AF-%E3%81%84%E3%81%A4%E3%82%82-%E3%81%A8%E3%81%A4zenn" style="display: none">https://zenn.dev/kawarimidoll/articles/5559a185156bf4#始まりは-いつも-とつzenn</a></p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-06-05T00:11:42Z" title="2022-06-05T00:11:42Z">2022-06-05 00:06:00</time></header><div><p>CLIツールの実装に役立ちそうなので、velociraptorのソースを読んでいく。</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Ftree%2Fmain%2Fsrc" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://github.com/jurassiscripts/velociraptor/tree/main/src" style="display: none" rel="nofollow">https://github.com/jurassiscripts/velociraptor/tree/main/src</a></p>
<p>ヴェロキラプトルはジュラシック・パークによく出てくるやつ</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-06-05T00:31:27Z" title="2022-06-05T00:31:27Z">2022-06-05 00:06:00</time></header><div><p>ドキュメントによるとエントリポイントは<code>cli.ts</code>なので、そこをみていく。</p>
<div class="code-block-container"><pre class="language-bash"><code class="language-bash">$ deno <span class="token function">install</span> -qAn vr https://deno.land/x/velociraptor@1.4.0/cli.ts
</code></pre></div><p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fvelociraptor.run%2Fdocs%2Finstallation%2F%23installing-from-%25F0%259F%25A6%2595-deno.land" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://velociraptor.run/docs/installation/#installing-from-%F0%9F%A6%95-deno.land" style="display: none" rel="nofollow">https://velociraptor.run/docs/installation/#installing-from-🦕-deno.land</a></p>
<hr>
<h2 id="cli.ts"><a class="header-anchor-link" href="#cli.ts" aria-hidden="true" rel="nofollow"></a> cli.ts</h2>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Fblob%2Fmain%2Fcli.ts" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://github.com/jurassiscripts/velociraptor/blob/main/cli.ts" style="display: none" rel="nofollow">https://github.com/jurassiscripts/velociraptor/blob/main/cli.ts</a></p>
<div class="code-block-container"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> loadConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./src/load_config.ts"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> VrCommand <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./src/cli/commands/vr.ts"</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>main<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">new</span> <span class="token class-name">VrCommand</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>Deno<span class="token punctuation">.</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>import.meta.main</code>は「このファイルが直接呼ばれた場合」のDeno版。<br>
<code>loadConfig</code>で設定を読み込んで、<code>VrCommand</code>を生成している。</p>
<p>ざっとドキュメントをみた感じだと、特に<code>vr config</code>的なコマンドはないので、<code>loadConfig</code>では何をやっているんだろう。<br>
次はこちらを覗くことにする。</p>
<hr>
<h2 id="src%2Fload_config.ts"><a class="header-anchor-link" href="#src%2Fload_config.ts" aria-hidden="true" rel="nofollow"></a> src/load_config.ts</h2>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Fblob%2Fmain%2Fsrc%2Fload_config.ts" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts" style="display: none" rel="nofollow">https://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts</a></p>
<p><code>loadConfig</code>は呼び出しディレクトリから再帰的に親を辿っていき、velociraptorの設定ファイルを読み取るような構造になっている。最終的に命名規約に則る設定ファイルがあれば、そのディレクトリと設定ファイルの内容を読み取る</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Fblob%2Fmain%2Fsrc%2Fload_config.ts%23L15" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts#L15" style="display: none" rel="nofollow">https://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts#L15</a></p>
<p>内部で使用されている主なstd libとして次がある</p>
<p><strong>path：pathの操作</strong></p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fdeno.land%2Fstd%400.142.0%2Fpath" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://deno.land/std@0.142.0/path" style="display: none" rel="nofollow">https://deno.land/std@0.142.0/path</a></p>
<p><strong>fs/exists:ファイルの存在チェック</strong></p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fdeno.land%2Fstd%400.142.0%2Ffs%2Fexists.ts" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://deno.land/std@0.142.0/fs/exists.ts" style="display: none" rel="nofollow">https://deno.land/std@0.142.0/fs/exists.ts</a></p>
<p><strong>encoding/_yaml/parse:yamlのparse</strong></p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fdeno.land%2Fstd%400.142.0%2Fencoding%2F_yaml%2Fparse.ts" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://deno.land/std@0.142.0/encoding/_yaml/parse.ts" style="display: none" rel="nofollow">https://deno.land/std@0.142.0/encoding/_yaml/parse.ts</a></p>
<p>次は実際のコマンドの方をみていく</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-06-05T00:40:09Z" title="2022-06-05T00:40:09Z">2022-06-05 00:06:00</time></header><div><p>CLIで書いていたら、GitHubのAPI Limitが来て無事死亡。<br>
書き終わった後に制限がくるの辛すぎないか。</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-06-05T00:44:52Z" title="2022-06-05T00:44:52Z">2022-06-05 00:06:00</time></header><div><h2 id="src%2Fcli%2Fcommands%2Fvr.ts"><a class="header-anchor-link" href="#src%2Fcli%2Fcommands%2Fvr.ts" aria-hidden="true" rel="nofollow"></a> src/cli/commands/vr.ts</h2>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Fblob%2Fmain%2Fsrc%2Fcli%2Fcommands%2Fvr.ts%23L15" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://github.com/jurassiscripts/velociraptor/blob/main/src/cli/commands/vr.ts#L15" style="display: none" rel="nofollow">https://github.com/jurassiscripts/velociraptor/blob/main/src/cli/commands/vr.ts#L15</a></p>
<p>Cliffyの<code>Command</code>クラスを継承して、constructorの中で処理を呼び出している。</p>
<p>各サブコマンドもこの中で登録されている。</p>
<div class="code-block-container"><pre class="language-typescript"><code class="language-typescript">      <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">"run"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">RunCommand</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>configData<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">"run-hook"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">RunHookCommand</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>configData<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">"export"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ExportCommand</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>configData<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">"upgrade"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">UpgradeCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">"completions"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CompletionsCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>他のサブコマンドの実装も同じ形式になっているので、大体こんな感じで作っていけば作りやすそう</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-06-05T16:21:00Z" title="2022-06-05T16:21:00Z">2022-06-05 16:06:00</time></header><div><p>slidevの翻訳botが起動していなかったので、手動で直す必要がある。</p>
<ul>
<li><a href="https://github.com/slidevjs/docs/commits/main" rel="nofollow">Commits · slidevjs/docs</a></li>
</ul>
<p>ついでにAlgoliaも動いていないので、Issueで相談してみている。</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-06-06T02:11:31Z" title="2022-06-06T02:11:31Z">2022-06-06 02:06:00</time></header><div><p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fgihyo.jp%2Fbook%2F2022%2F978-4-297-12747-3" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://gihyo.jp/book/2022/978-4-297-12747-3" style="display: none" rel="nofollow">https://gihyo.jp/book/2022/978-4-297-12747-3</a></p>
<p>読んでいく</p>
</div></section></article></article></div></main><footer class="font-bold border-t-2 border-slate-100"><div class="max-w-6xl mx-auto px-5"><nav class="py-12"><ul class="flex justify-around text-white"><li><a href="/diary">Home</a></li><li><a href="https://ikuma-t.work">Blog</a></li></ul></nav></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"issue":{"body":"","bodyHTML":"","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22/comments","created_at":"2022-06-04T22:42:00Z","events_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22/events","html_url":"https://github.com/IkumaTadokoro/diary/issues/22","id":1260906931,"labels":[],"labels_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHWTPVs5LJ-mz","number":22,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22/reactions"},"repository_url":"https://api.github.com/repos/IkumaTadokoro/diary","state":"open","state_reason":null,"timeline_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22/timeline","title":"2022-06-05","updated_at":"2022-06-04T22:42:00Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},"issueComments":[{"body":"Denoの公式マニュアル簡単に検索できたらいいのにな〜。Dashだとできるんかな\n","bodyHTML":"\u003cp\u003eDenoの公式マニュアル簡単に検索できたらいいのにな〜。Dashだとできるんかな\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-06-04T22:51:15Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146697076","id":1146697076,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWTV0","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146697076/reactions"},"updated_at":"2022-06-04T22:51:15Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146697076","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"[Dash\\-User\\-Contributions/docsets/Deno at master · Kapeli/Dash\\-User\\-Contributions](https://github.com/Kapeli/Dash-User-Contributions/tree/master/docsets/Deno#readme)\n\nDashはDocsetがありました。\n","bodyHTML":"\u003cp\u003e\u003ca href=\"https://github.com/Kapeli/Dash-User-Contributions/tree/master/docsets/Deno#readme\" rel=\"nofollow\"\u003eDash-User-Contributions/docsets/Deno at master · Kapeli/Dash-User-Contributions\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eDashはDocsetがありました。\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-06-04T22:54:11Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146697315","id":1146697315,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWTZj","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146697315/reactions"},"updated_at":"2022-06-04T22:54:11Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146697315","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"denoが「denou」だからサブタイトルが電王なのか\n\nhttps://zenn.dev/kawarimidoll/articles/5559a185156bf4#%E5%A7%8B%E3%81%BE%E3%82%8A%E3%81%AF-%E3%81%84%E3%81%A4%E3%82%82-%E3%81%A8%E3%81%A4zenn\n","bodyHTML":"\u003cp\u003edenoが「denou」だからサブタイトルが電王なのか\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fzenn.dev%2Fkawarimidoll%2Farticles%2F5559a185156bf4%23%25E5%25A7%258B%25E3%2581%25BE%25E3%2582%258A%25E3%2581%25AF-%25E3%2581%2584%25E3%2581%25A4%25E3%2582%2582-%25E3%2581%25A8%25E3%2581%25A4zenn\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://zenn.dev/kawarimidoll/articles/5559a185156bf4#%E5%A7%8B%E3%81%BE%E3%82%8A%E3%81%AF-%E3%81%84%E3%81%A4%E3%82%82-%E3%81%A8%E3%81%A4zenn\" style=\"display: none\"\u003ehttps://zenn.dev/kawarimidoll/articles/5559a185156bf4#始まりは-いつも-とつzenn\u003c/a\u003e\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-06-04T23:55:38Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146705523","id":1146705523,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWVZz","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146705523/reactions"},"updated_at":"2022-06-04T23:55:38Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146705523","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"CLIツールの実装に役立ちそうなので、velociraptorのソースを読んでいく。\n\nhttps://github.com/jurassiscripts/velociraptor/tree/main/src\n\nヴェロキラプトルはジュラシック・パークによく出てくるやつ\n","bodyHTML":"\u003cp\u003eCLIツールの実装に役立ちそうなので、velociraptorのソースを読んでいく。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Ftree%2Fmain%2Fsrc\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://github.com/jurassiscripts/velociraptor/tree/main/src\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://github.com/jurassiscripts/velociraptor/tree/main/src\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eヴェロキラプトルはジュラシック・パークによく出てくるやつ\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-06-05T00:11:42Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146708317","id":1146708317,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWWFd","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146708317/reactions"},"updated_at":"2022-06-05T00:11:42Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146708317","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"ドキュメントによるとエントリポイントは`cli.ts`なので、そこをみていく。\n\n\n```bash\n$ deno install -qAn vr https://deno.land/x/velociraptor@1.4.0/cli.ts\n```\n\nhttps://velociraptor.run/docs/installation/#installing-from-%F0%9F%A6%95-deno.land\n\n---\n\n\n## cli.ts\n\nhttps://github.com/jurassiscripts/velociraptor/blob/main/cli.ts\n\n```typescript\nimport { loadConfig } from \"./src/load_config.ts\";\nimport { VrCommand } from \"./src/cli/commands/vr.ts\";\n\nif (import.meta.main) {\n  const config = await loadConfig();\n  new VrCommand(config).parse(Deno.args);\n}\n```\n\n`import.meta.main`は「このファイルが直接呼ばれた場合」のDeno版。\n`loadConfig`で設定を読み込んで、`VrCommand`を生成している。\n\nざっとドキュメントをみた感じだと、特に`vr config`的なコマンドはないので、`loadConfig`では何をやっているんだろう。\n次はこちらを覗くことにする。\n\n---\n\n## src/load_config.ts\n\nhttps://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts\n\n`loadConfig`は呼び出しディレクトリから再帰的に親を辿っていき、velociraptorの設定ファイルを読み取るような構造になっている。最終的に命名規約に則る設定ファイルがあれば、そのディレクトリと設定ファイルの内容を読み取る\n\nhttps://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts#L15\n\n内部で使用されている主なstd libとして次がある\n\n**path：pathの操作**\n\nhttps://deno.land/std@0.142.0/path\n\n**fs/exists:ファイルの存在チェック**\n\nhttps://deno.land/std@0.142.0/fs/exists.ts\n\n**encoding/_yaml/parse:yamlのparse**\n\nhttps://deno.land/std@0.142.0/encoding/_yaml/parse.ts\n\n次は実際のコマンドの方をみていく\n","bodyHTML":"\u003cp\u003eドキュメントによるとエントリポイントは\u003ccode\u003ecli.ts\u003c/code\u003eなので、そこをみていく。\u003c/p\u003e\n\u003cdiv class=\"code-block-container\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e$ deno \u003cspan class=\"token function\"\u003einstall\u003c/span\u003e -qAn vr https://deno.land/x/velociraptor@1.4.0/cli.ts\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fvelociraptor.run%2Fdocs%2Finstallation%2F%23installing-from-%25F0%259F%25A6%2595-deno.land\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://velociraptor.run/docs/installation/#installing-from-%F0%9F%A6%95-deno.land\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://velociraptor.run/docs/installation/#installing-from-🦕-deno.land\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"cli.ts\"\u003e\u003ca class=\"header-anchor-link\" href=\"#cli.ts\" aria-hidden=\"true\" rel=\"nofollow\"\u003e\u003c/a\u003e cli.ts\u003c/h2\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Fblob%2Fmain%2Fcli.ts\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://github.com/jurassiscripts/velociraptor/blob/main/cli.ts\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://github.com/jurassiscripts/velociraptor/blob/main/cli.ts\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"code-block-container\"\u003e\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e loadConfig \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./src/load_config.ts\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e VrCommand \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./src/cli/commands/vr.ts\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emeta\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emain\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e config \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003eloadConfig\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVrCommand\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econfig\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eparse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eDeno\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eargs\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003ccode\u003eimport.meta.main\u003c/code\u003eは「このファイルが直接呼ばれた場合」のDeno版。\u003cbr\u003e\n\u003ccode\u003eloadConfig\u003c/code\u003eで設定を読み込んで、\u003ccode\u003eVrCommand\u003c/code\u003eを生成している。\u003c/p\u003e\n\u003cp\u003eざっとドキュメントをみた感じだと、特に\u003ccode\u003evr config\u003c/code\u003e的なコマンドはないので、\u003ccode\u003eloadConfig\u003c/code\u003eでは何をやっているんだろう。\u003cbr\u003e\n次はこちらを覗くことにする。\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"src%2Fload_config.ts\"\u003e\u003ca class=\"header-anchor-link\" href=\"#src%2Fload_config.ts\" aria-hidden=\"true\" rel=\"nofollow\"\u003e\u003c/a\u003e src/load_config.ts\u003c/h2\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Fblob%2Fmain%2Fsrc%2Fload_config.ts\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eloadConfig\u003c/code\u003eは呼び出しディレクトリから再帰的に親を辿っていき、velociraptorの設定ファイルを読み取るような構造になっている。最終的に命名規約に則る設定ファイルがあれば、そのディレクトリと設定ファイルの内容を読み取る\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Fblob%2Fmain%2Fsrc%2Fload_config.ts%23L15\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts#L15\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://github.com/jurassiscripts/velociraptor/blob/main/src/load_config.ts#L15\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e内部で使用されている主なstd libとして次がある\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003epath：pathの操作\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fdeno.land%2Fstd%400.142.0%2Fpath\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://deno.land/std@0.142.0/path\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://deno.land/std@0.142.0/path\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003efs/exists:ファイルの存在チェック\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fdeno.land%2Fstd%400.142.0%2Ffs%2Fexists.ts\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://deno.land/std@0.142.0/fs/exists.ts\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://deno.land/std@0.142.0/fs/exists.ts\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eencoding/_yaml/parse:yamlのparse\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fdeno.land%2Fstd%400.142.0%2Fencoding%2F_yaml%2Fparse.ts\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://deno.land/std@0.142.0/encoding/_yaml/parse.ts\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://deno.land/std@0.142.0/encoding/_yaml/parse.ts\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e次は実際のコマンドの方をみていく\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-06-05T00:31:27Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146712169","id":1146712169,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWXBp","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146712169/reactions"},"updated_at":"2022-06-05T00:31:27Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146712169","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"CLIで書いていたら、GitHubのAPI Limitが来て無事死亡。\r\n書き終わった後に制限がくるの辛すぎないか。","bodyHTML":"\u003cp\u003eCLIで書いていたら、GitHubのAPI Limitが来て無事死亡。\u003cbr\u003e\n書き終わった後に制限がくるの辛すぎないか。\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-06-05T00:40:09Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146713291","id":1146713291,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWXTL","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146713291/reactions"},"updated_at":"2022-06-05T00:40:09Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146713291","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"## src/cli/commands/vr.ts\r\n\r\nhttps://github.com/jurassiscripts/velociraptor/blob/main/src/cli/commands/vr.ts#L15\r\n\r\nCliffyの`Command`クラスを継承して、constructorの中で処理を呼び出している。\r\n\r\n各サブコマンドもこの中で登録されている。\r\n\r\n```typescript\r\n      .command(\"run\", new RunCommand(this.configData))\r\n      .command(\"run-hook\", new RunHookCommand(this.configData))\r\n      .command(\"export\", new ExportCommand(this.configData))\r\n      .command(\"upgrade\", new UpgradeCommand())\r\n      .command(\"completions\", new CompletionsCommand().hidden())\r\n```\r\n\r\n他のサブコマンドの実装も同じ形式になっているので、大体こんな感じで作っていけば作りやすそう","bodyHTML":"\u003ch2 id=\"src%2Fcli%2Fcommands%2Fvr.ts\"\u003e\u003ca class=\"header-anchor-link\" href=\"#src%2Fcli%2Fcommands%2Fvr.ts\" aria-hidden=\"true\" rel=\"nofollow\"\u003e\u003c/a\u003e src/cli/commands/vr.ts\u003c/h2\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fjurassiscripts%2Fvelociraptor%2Fblob%2Fmain%2Fsrc%2Fcli%2Fcommands%2Fvr.ts%23L15\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://github.com/jurassiscripts/velociraptor/blob/main/src/cli/commands/vr.ts#L15\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://github.com/jurassiscripts/velociraptor/blob/main/src/cli/commands/vr.ts#L15\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eCliffyの\u003ccode\u003eCommand\u003c/code\u003eクラスを継承して、constructorの中で処理を呼び出している。\u003c/p\u003e\n\u003cp\u003e各サブコマンドもこの中で登録されている。\u003c/p\u003e\n\u003cdiv class=\"code-block-container\"\u003e\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003e      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecommand\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"run\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eRunCommand\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003econfigData\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecommand\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"run-hook\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eRunHookCommand\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003econfigData\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecommand\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"export\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eExportCommand\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003econfigData\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecommand\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"upgrade\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUpgradeCommand\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecommand\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"completions\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eCompletionsCommand\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ehidden\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e他のサブコマンドの実装も同じ形式になっているので、大体こんな感じで作っていけば作りやすそう\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-06-05T00:44:52Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146713787","id":1146713787,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EWXa7","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146713787/reactions"},"updated_at":"2022-06-05T00:44:52Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146713787","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"slidevの翻訳botが起動していなかったので、手動で直す必要がある。\n\n- [Commits · slidevjs/docs](https://github.com/slidevjs/docs/commits/main)\n\nついでにAlgoliaも動いていないので、Issueで相談してみている。\n","bodyHTML":"\u003cp\u003eslidevの翻訳botが起動していなかったので、手動で直す必要がある。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/slidevjs/docs/commits/main\" rel=\"nofollow\"\u003eCommits · slidevjs/docs\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eついでにAlgoliaも動いていないので、Issueで相談してみている。\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-06-05T16:21:00Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146842509","id":1146842509,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EW22N","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146842509/reactions"},"updated_at":"2022-06-05T16:21:00Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146842509","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"https://gihyo.jp/book/2022/978-4-297-12747-3\n\n読んでいく\n","bodyHTML":"\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgihyo.jp%2Fbook%2F2022%2F978-4-297-12747-3\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://gihyo.jp/book/2022/978-4-297-12747-3\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://gihyo.jp/book/2022/978-4-297-12747-3\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e読んでいく\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-06-06T02:11:31Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/22#issuecomment-1146962203","id":1146962203,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/22","node_id":"IC_kwDOHWTPVs5EXUEb","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146962203/reactions"},"updated_at":"2022-06-06T02:11:31Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1146962203","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}}]},"__N_SSG":true},"page":"/articles/[issueNumber]","query":{"issueNumber":"22"},"buildId":"3edx1ijI3oWKji17VwY5S","assetPrefix":"/diary","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>