<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>2022-07-16</title><meta name="next-head-count" content="3"/><link rel="preload" href="/diary/_next/static/css/d865616645a7b0fe.css" as="style"/><link rel="stylesheet" href="/diary/_next/static/css/d865616645a7b0fe.css" data-n-g=""/><link rel="preload" href="/diary/_next/static/css/fc9624fd4a486ef2.css" as="style"/><link rel="stylesheet" href="/diary/_next/static/css/fc9624fd4a486ef2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/diary/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/diary/_next/static/chunks/webpack-dc4034d98607b727.js" defer=""></script><script src="/diary/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/diary/_next/static/chunks/main-a03413948affdc5e.js" defer=""></script><script src="/diary/_next/static/chunks/pages/_app-5b4d6b2692b4593b.js" defer=""></script><script src="/diary/_next/static/chunks/582-d79da0492f1f9267.js" defer=""></script><script src="/diary/_next/static/chunks/pages/articles/%5BissueNumber%5D-4584e21e841751ac.js" defer=""></script><script src="/diary/_next/static/bFrBU82AhnD9d36t4u9L5/_buildManifest.js" defer=""></script><script src="/diary/_next/static/bFrBU82AhnD9d36t4u9L5/_ssgManifest.js" defer=""></script><script src="/diary/_next/static/bFrBU82AhnD9d36t4u9L5/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><script>window.twttr=(function(f,b,g){var e,c=f.getElementsByTagName(b)[0],a=window.twttr||{};if(f.getElementById(g)){return a}e=f.createElement(b);e.id=g;e.src="https://platform.twitter.com/widgets.js";c.parentNode.insertBefore(e,c);a._e=[];a.ready=function(d){a._e.push(d)};return a}(document,"script","twitter-wjs"));</script><div class="min-h-screen flex flex-col"><header class="relative bg-gradient-to-r from-blue-700 via-blue-800 to-gray-900 md:mb-8"><div class="max-w-6xl mx-auto px-5"><nav class="py-12 md:mb-20 flex items-center justify-between md:px-12 px-2"><div><h1 class="text-white"><a class="text-2xl md:text-3xl tracking-wide font-bold" href="/diary">ikuma-t/diary</a></h1><p class="mt-4 text-sm text-slate-300">ikuma-tの作業ログです。</p></div><div><a class="text-white text-sm" href="https://github.com/IkumaTadokoro/diary/issues">Show on GitHub</a></div></nav></div><svg class="absolute w-full h-20 md:h-full top-32 left-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" preserveAspectRatio="none"><path d="M0 32L24 37.3C48 43 96 53 144 74.7C192 96 240 128 288 122.7C336 117 384 75 432 80C480 85 528 139 576 133.3C624 128 672 64 720 53.3C768 43 816 85 864 90.7C912 96 960 64 1008 48C1056 32 1104 32 1152 58.7C1200 85 1248 139 1296 133.3C1344 128 1392 64 1416 32L1440 0V171H1416C1392 171 1344 171 1296 171C1248 171 1200 171 1152 171C1104 171 1056 171 1008 171C960 171 912 171 864 171C816 171 768 171 720 171C672 171 624 171 576 171C528 171 480 171 432 171C384 171 336 171 288 171C240 171 192 171 144 171C96 171 48 171 24 171H0V32Z" fill="white"></path></svg></header><main class="z-10 flex-1 py-8"><div class="max-w-2xl mx-auto"><article class="znc markdown"><section class="block py-6 md:px-12 px-8 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-16T00:50:43Z" title="2022-07-16T00:50:43Z">2022-07-16 00:07:00</time><h1 class="font-bold text-slate-600">2022-07-16</h1></header><aside><p class="text-sm text-slate-400">Posted by <!-- --> at <!-- --><a href="https://github.com/IkumaTadokoro/diary/issues/57">#57</a>.<!-- --></p></aside><div></div></section><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-16T02:08:51Z" title="2022-07-16T02:08:51Z">2022-07-16 02:07:00</time></header><div><p>勉強会のスライド作成用のテンプレートリポジトリを作成して、それをCodeSpaces？で利用できるようにすれば、超高速にスライドをいつでもどこでも作成できるのでは？という思い。</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fzenn.dev%2Fmasasushi%2Fbooks%2Fabb3fa3d410d26eb86a8" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://zenn.dev/masasushi/books/abb3fa3d410d26eb86a8" style="display: none">https://zenn.dev/masasushi/books/abb3fa3d410d26eb86a8</a></p>
<p>とりあえずテンプレートは作ったので、CodeSpacesが使えるようになればブラウザだけで資料作成が完結する</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-16T05:56:25Z" title="2022-07-16T05:56:25Z">2022-07-16 05:07:00</time></header><div><p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Febihara99999%2Fcode_keeper" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://github.com/ebihara99999/code_keeper" style="display: none" rel="nofollow">https://github.com/ebihara99999/code_keeper</a></p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fblog.ebihara99999.com%2Fentry%2F2021%2F09%2F16%2F013147" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://blog.ebihara99999.com/entry/2021/09/16/013147" style="display: none" rel="nofollow">https://blog.ebihara99999.com/entry/2021/09/16/013147</a></p>
<p>たぶんRuby以外のファイルがないとエラーになってそう・</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-16T10:04:58Z" title="2022-07-16T10:04:58Z">2022-07-16 10:07:00</time></header><div><div class="code-block-container"><pre class="language-bash"><code class="language-bash">❯ ruby bin/niselenium.rb 
<span class="token punctuation">{</span>
  <span class="token string">"value"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">"build"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">"version"</span><span class="token builtin class-name">:</span> <span class="token string">"103.0.5060.53 (a1711811edd74ff1cf2150f36ffa3b0dae40b17f-refs/branch-heads/5060@{#853})"</span>
    <span class="token punctuation">}</span>,
    <span class="token string">"message"</span><span class="token builtin class-name">:</span> <span class="token string">"ChromeDriver ready for new sessions."</span>,
    <span class="token string">"os"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">"arch"</span><span class="token builtin class-name">:</span> <span class="token string">"x86_64"</span>,
      <span class="token string">"name"</span><span class="token builtin class-name">:</span> <span class="token string">"Mac OS X"</span>,
      <span class="token string">"version"</span><span class="token builtin class-name">:</span> <span class="token string">"12.4.0"</span>
    <span class="token punctuation">}</span>,
    <span class="token string">"ready"</span><span class="token builtin class-name">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>とりあえずstatusが取れるようになった。</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-16T13:19:11Z" title="2022-07-16T13:19:11Z">2022-07-16 13:07:00</time></header><div><p>Navigationのエンドポイント一通り実装して、だいぶドキュメントのイメージ湧いてきた。</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fwww.w3.org%2FTR%2Fwebdriver%2F%23navigation" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://www.w3.org/TR/webdriver/#navigation" style="display: none" rel="nofollow">https://www.w3.org/TR/webdriver/#navigation</a></p>
<p><code>Page load strategy state</code>はおそらくページが描画されるのをどこまで待つかの指定っぽい。これをcapabilitiesに指定する</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-16T14:39:23Z" title="2022-07-16T14:39:23Z">2022-07-16 14:07:00</time></header><div><p>New Windowでタブを開いてから、新しいウィンドウを開いたり、閉じたりしても、最初に開いたタブが対象になる。</p>
<p>つまり、一番最初に開いているウィンドウが<code>current top-level browsing-context</code>ということ.</p>
<p>New Windowのドキュメントは</p>
<blockquote>
<p>Create a new top-level browsing context.</p>
</blockquote>
<p>currentではないのがポイントなのかな？</p>
<p>一旦戻り値を出力してみて、その値で設定できないか検討してみる。</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-16T14:52:57Z" title="2022-07-16T14:52:57Z">2022-07-16 14:07:00</time></header><div><div class="code-block-container"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"handle"</span><span class="token operator">:</span> <span class="token string">"CDwindow-FA5FC858C084977586F5A4CA05FFD6B5"</span><span class="token punctuation">,</span>
    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tab"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>handleが返ってきている。<br>
これを使って、<code>switch_window</code>のAPIを叩いたら、そっちにアクセスが切り替わった！</p>
<p>各browser contextはwindow handleを保持している。これは一意な値</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-17T02:24:53Z" title="2022-07-17T02:24:53Z">2022-07-17 02:07:00</time></header><div><p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fwww.w3.org%2FTR%2Fwebdriver%2F%23contexts" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://www.w3.org/TR/webdriver/#contexts" style="display: none" rel="nofollow">https://www.w3.org/TR/webdriver/#contexts</a></p>
<blockquote>
<p>Many WebDriver commands happen in the context of either the current browsing context or current top-level browsing context. The current top-level browsing context is represented in the protocol by its associated window handle. When a top-level browsing context is selected using the Switch To Window command, a specific browsing context can be selected using the Switch to Frame command.</p>
</blockquote>
<p>WebDriverのコマンドが以下のコンテキストで発生するとのこと。</p>
<ul>
<li>current browsing context</li>
<li>current top-level browing context</li>
</ul>
<p>この2つは何かというと、以下に記載がある。</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fwww.w3.org%2FTR%2Fwebdriver%2F%23dfn-current-browsing-context" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://www.w3.org/TR/webdriver/#dfn-current-browsing-context" style="display: none" rel="nofollow">https://www.w3.org/TR/webdriver/#dfn-current-browsing-context</a></p>
<p>さらにこの先にbrowing contextがあって、これはHTML 5の仕様にリンクしている。</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fhtml.spec.whatwg.org%2F%23browsing-context" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://html.spec.whatwg.org/#browsing-context" style="display: none" rel="nofollow">https://html.spec.whatwg.org/#browsing-context</a></p>
<blockquote>
<p>A browsing context is an environment in which Document objects are presented to the user.</p>
</blockquote>
<p>文書がユーザーに向けて表示される領域のことを指している。</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fja%2Fdocs%2FGlossary%2FBrowsing_context" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://developer.mozilla.org/ja/docs/Glossary/Browsing_context" style="display: none" rel="nofollow">https://developer.mozilla.org/ja/docs/Glossary/Browsing_context</a></p>
<p>MDNのドキュメントによると、</p>
<blockquote>
<p>閲覧コンテキストは、ブラウザー が Document (今日では通常タブであり、場合によってはウィンドウまたはページ内のフレーム) を表示する環境です。</p>
</blockquote>
<p>とのこと。だから結局のところ「タブ」です。</p>
</div></section></article></article></div></main><footer class="font-bold border-t-2 border-slate-100"><div class="max-w-6xl mx-auto px-5"><nav class="py-12"><ul class="flex justify-around text-white"><li><a href="/diary">Home</a></li><li><a href="https://ikuma-t.work">Blog</a></li></ul></nav></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"issue":{"body":"","bodyHTML":"","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57/comments","created_at":"2022-07-16T00:50:43Z","events_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57/events","html_url":"https://github.com/IkumaTadokoro/diary/issues/57","id":1306652772,"labels":[],"labels_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHWTPVs5N4fBk","number":57,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57/reactions"},"repository_url":"https://api.github.com/repos/IkumaTadokoro/diary","state":"open","state_reason":null,"timeline_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57/timeline","title":"2022-07-16","updated_at":"2022-07-16T00:50:43Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},"issueComments":[{"body":"勉強会のスライド作成用のテンプレートリポジトリを作成して、それをCodeSpaces？で利用できるようにすれば、超高速にスライドをいつでもどこでも作成できるのでは？という思い。\n\nhttps://zenn.dev/masasushi/books/abb3fa3d410d26eb86a8\n\nとりあえずテンプレートは作ったので、CodeSpacesが使えるようになればブラウザだけで資料作成が完結する\n","bodyHTML":"\u003cp\u003e勉強会のスライド作成用のテンプレートリポジトリを作成して、それをCodeSpaces？で利用できるようにすれば、超高速にスライドをいつでもどこでも作成できるのでは？という思い。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fzenn.dev%2Fmasasushi%2Fbooks%2Fabb3fa3d410d26eb86a8\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://zenn.dev/masasushi/books/abb3fa3d410d26eb86a8\" style=\"display: none\"\u003ehttps://zenn.dev/masasushi/books/abb3fa3d410d26eb86a8\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eとりあえずテンプレートは作ったので、CodeSpacesが使えるようになればブラウザだけで資料作成が完結する\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-07-16T02:08:51Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/57#issuecomment-1186061689","id":1186061689,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57","node_id":"IC_kwDOHWTPVs5Gsd15","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186061689/reactions"},"updated_at":"2022-07-16T02:08:51Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186061689","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"https://github.com/ebihara99999/code_keeper\n\nhttps://blog.ebihara99999.com/entry/2021/09/16/013147\n\nたぶんRuby以外のファイルがないとエラーになってそう・\n","bodyHTML":"\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Febihara99999%2Fcode_keeper\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://github.com/ebihara99999/code_keeper\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://github.com/ebihara99999/code_keeper\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fblog.ebihara99999.com%2Fentry%2F2021%2F09%2F16%2F013147\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://blog.ebihara99999.com/entry/2021/09/16/013147\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://blog.ebihara99999.com/entry/2021/09/16/013147\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eたぶんRuby以外のファイルがないとエラーになってそう・\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-07-16T05:56:25Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/57#issuecomment-1186096828","id":1186096828,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57","node_id":"IC_kwDOHWTPVs5Gsma8","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186096828/reactions"},"updated_at":"2022-07-16T05:56:25Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186096828","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"```bash\n❯ ruby bin/niselenium.rb \n{\n  \"value\": {\n    \"build\": {\n      \"version\": \"103.0.5060.53 (a1711811edd74ff1cf2150f36ffa3b0dae40b17f-refs/branch-heads/5060@{#853})\"\n    },\n    \"message\": \"ChromeDriver ready for new sessions.\",\n    \"os\": {\n      \"arch\": \"x86_64\",\n      \"name\": \"Mac OS X\",\n      \"version\": \"12.4.0\"\n    },\n    \"ready\": true\n  }\n}\n```\n\nとりあえずstatusが取れるようになった。\n","bodyHTML":"\u003cdiv class=\"code-block-container\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e❯ ruby bin/niselenium.rb \n\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token string\"\u003e\"value\"\u003c/span\u003e\u003cspan class=\"token builtin class-name\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token string\"\u003e\"build\"\u003c/span\u003e\u003cspan class=\"token builtin class-name\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"version\"\u003c/span\u003e\u003cspan class=\"token builtin class-name\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"103.0.5060.53 (a1711811edd74ff1cf2150f36ffa3b0dae40b17f-refs/branch-heads/5060@{#853})\"\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e,\n    \u003cspan class=\"token string\"\u003e\"message\"\u003c/span\u003e\u003cspan class=\"token builtin class-name\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"ChromeDriver ready for new sessions.\"\u003c/span\u003e,\n    \u003cspan class=\"token string\"\u003e\"os\"\u003c/span\u003e\u003cspan class=\"token builtin class-name\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"arch\"\u003c/span\u003e\u003cspan class=\"token builtin class-name\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"x86_64\"\u003c/span\u003e,\n      \u003cspan class=\"token string\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token builtin class-name\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Mac OS X\"\u003c/span\u003e,\n      \u003cspan class=\"token string\"\u003e\"version\"\u003c/span\u003e\u003cspan class=\"token builtin class-name\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"12.4.0\"\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e,\n    \u003cspan class=\"token string\"\u003e\"ready\"\u003c/span\u003e\u003cspan class=\"token builtin class-name\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eとりあえずstatusが取れるようになった。\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-07-16T10:04:58Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/57#issuecomment-1186139827","id":1186139827,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57","node_id":"IC_kwDOHWTPVs5Gsw6z","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186139827/reactions"},"updated_at":"2022-07-16T10:04:58Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186139827","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"Navigationのエンドポイント一通り実装して、だいぶドキュメントのイメージ湧いてきた。\n\nhttps://www.w3.org/TR/webdriver/#navigation\n\n`Page load strategy state`はおそらくページが描画されるのをどこまで待つかの指定っぽい。これをcapabilitiesに指定する\n","bodyHTML":"\u003cp\u003eNavigationのエンドポイント一通り実装して、だいぶドキュメントのイメージ湧いてきた。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fwww.w3.org%2FTR%2Fwebdriver%2F%23navigation\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://www.w3.org/TR/webdriver/#navigation\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://www.w3.org/TR/webdriver/#navigation\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ePage load strategy state\u003c/code\u003eはおそらくページが描画されるのをどこまで待つかの指定っぽい。これをcapabilitiesに指定する\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-07-16T13:19:11Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/57#issuecomment-1186183306","id":1186183306,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57","node_id":"IC_kwDOHWTPVs5Gs7iK","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186183306/reactions"},"updated_at":"2022-07-16T13:19:11Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186183306","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"New Windowでタブを開いてから、新しいウィンドウを開いたり、閉じたりしても、最初に開いたタブが対象になる。\n\nつまり、一番最初に開いているウィンドウが`current top-level browsing-context`ということ.\n\nNew Windowのドキュメントは\n\n\u003e Create a new top-level browsing context.\n\ncurrentではないのがポイントなのかな？\n\n一旦戻り値を出力してみて、その値で設定できないか検討してみる。\n","bodyHTML":"\u003cp\u003eNew Windowでタブを開いてから、新しいウィンドウを開いたり、閉じたりしても、最初に開いたタブが対象になる。\u003c/p\u003e\n\u003cp\u003eつまり、一番最初に開いているウィンドウが\u003ccode\u003ecurrent top-level browsing-context\u003c/code\u003eということ.\u003c/p\u003e\n\u003cp\u003eNew Windowのドキュメントは\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCreate a new top-level browsing context.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003ecurrentではないのがポイントなのかな？\u003c/p\u003e\n\u003cp\u003e一旦戻り値を出力してみて、その値で設定できないか検討してみる。\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-07-16T14:39:23Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/57#issuecomment-1186207855","id":1186207855,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57","node_id":"IC_kwDOHWTPVs5GtBhv","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186207855/reactions"},"updated_at":"2022-07-16T14:39:23Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186207855","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"```json\n{\n  \"value\": {\n    \"handle\": \"CDwindow-FA5FC858C084977586F5A4CA05FFD6B5\",\n    \"type\": \"tab\"\n  }\n}\n```\n\nhandleが返ってきている。\nこれを使って、`switch_window`のAPIを叩いたら、そっちにアクセスが切り替わった！\n\n各browser contextはwindow handleを保持している。これは一意な値\n","bodyHTML":"\u003cdiv class=\"code-block-container\"\u003e\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"value\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"handle\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"CDwindow-FA5FC858C084977586F5A4CA05FFD6B5\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"tab\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ehandleが返ってきている。\u003cbr\u003e\nこれを使って、\u003ccode\u003eswitch_window\u003c/code\u003eのAPIを叩いたら、そっちにアクセスが切り替わった！\u003c/p\u003e\n\u003cp\u003e各browser contextはwindow handleを保持している。これは一意な値\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-07-16T14:52:57Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/57#issuecomment-1186211180","id":1186211180,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57","node_id":"IC_kwDOHWTPVs5GtCVs","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186211180/reactions"},"updated_at":"2022-07-16T14:52:57Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186211180","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"https://www.w3.org/TR/webdriver/#contexts\n\n\u003e Many WebDriver commands happen in the context of either the current browsing context or current top-level browsing context. The current top-level browsing context is represented in the protocol by its associated window handle. When a top-level browsing context is selected using the Switch To Window command, a specific browsing context can be selected using the Switch to Frame command.\n\nWebDriverのコマンドが以下のコンテキストで発生するとのこと。\n\n- current browsing context\n- current top-level browing context\n\nこの2つは何かというと、以下に記載がある。\n\nhttps://www.w3.org/TR/webdriver/#dfn-current-browsing-context\n\nさらにこの先にbrowing contextがあって、これはHTML 5の仕様にリンクしている。\n\nhttps://html.spec.whatwg.org/#browsing-context\n\n\u003e A browsing context is an environment in which Document objects are presented to the user.\n\n文書がユーザーに向けて表示される領域のことを指している。\n\nhttps://developer.mozilla.org/ja/docs/Glossary/Browsing_context\n\nMDNのドキュメントによると、\n\n\u003e 閲覧コンテキストは、ブラウザー が Document (今日では通常タブであり、場合によってはウィンドウまたはページ内のフレーム) を表示する環境です。\n\nとのこと。だから結局のところ「タブ」です。\n\n","bodyHTML":"\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fwww.w3.org%2FTR%2Fwebdriver%2F%23contexts\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://www.w3.org/TR/webdriver/#contexts\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://www.w3.org/TR/webdriver/#contexts\u003c/a\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMany WebDriver commands happen in the context of either the current browsing context or current top-level browsing context. The current top-level browsing context is represented in the protocol by its associated window handle. When a top-level browsing context is selected using the Switch To Window command, a specific browsing context can be selected using the Switch to Frame command.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eWebDriverのコマンドが以下のコンテキストで発生するとのこと。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ecurrent browsing context\u003c/li\u003e\n\u003cli\u003ecurrent top-level browing context\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eこの2つは何かというと、以下に記載がある。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fwww.w3.org%2FTR%2Fwebdriver%2F%23dfn-current-browsing-context\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://www.w3.org/TR/webdriver/#dfn-current-browsing-context\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://www.w3.org/TR/webdriver/#dfn-current-browsing-context\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eさらにこの先にbrowing contextがあって、これはHTML 5の仕様にリンクしている。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fhtml.spec.whatwg.org%2F%23browsing-context\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://html.spec.whatwg.org/#browsing-context\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://html.spec.whatwg.org/#browsing-context\u003c/a\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA browsing context is an environment in which Document objects are presented to the user.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e文書がユーザーに向けて表示される領域のことを指している。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fja%2Fdocs%2FGlossary%2FBrowsing_context\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Glossary/Browsing_context\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://developer.mozilla.org/ja/docs/Glossary/Browsing_context\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eMDNのドキュメントによると、\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e閲覧コンテキストは、ブラウザー が Document (今日では通常タブであり、場合によってはウィンドウまたはページ内のフレーム) を表示する環境です。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eとのこと。だから結局のところ「タブ」です。\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-07-17T02:24:53Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/57#issuecomment-1186377448","id":1186377448,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/57","node_id":"IC_kwDOHWTPVs5Gtq7o","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186377448/reactions"},"updated_at":"2022-07-17T02:24:53Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1186377448","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}}]},"__N_SSG":true},"page":"/articles/[issueNumber]","query":{"issueNumber":"57"},"buildId":"bFrBU82AhnD9d36t4u9L5","assetPrefix":"/diary","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>