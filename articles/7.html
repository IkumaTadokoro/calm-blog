<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>2022-05-21</title><meta name="next-head-count" content="3"/><link rel="preload" href="/diary/_next/static/css/53c86b12cba2fce5.css" as="style"/><link rel="stylesheet" href="/diary/_next/static/css/53c86b12cba2fce5.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/diary/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/diary/_next/static/chunks/webpack-a0346b42ec1bc80d.js" defer=""></script><script src="/diary/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/diary/_next/static/chunks/main-a03413948affdc5e.js" defer=""></script><script src="/diary/_next/static/chunks/pages/_app-65c9ca0c6a68176d.js" defer=""></script><script src="/diary/_next/static/chunks/582-d79da0492f1f9267.js" defer=""></script><script src="/diary/_next/static/chunks/pages/articles/%5BissueNumber%5D-3c67cfffe8cb1cb2.js" defer=""></script><script src="/diary/_next/static/X3KZZqX0_vB1u2J0Y1362/_buildManifest.js" defer=""></script><script src="/diary/_next/static/X3KZZqX0_vB1u2J0Y1362/_ssgManifest.js" defer=""></script><script src="/diary/_next/static/X3KZZqX0_vB1u2J0Y1362/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><header><nav><p><a href="/diary">diary</a></p></nav></header><main><article><section><header><time dateTime="2022-05-20T23:34:22Z" title="2022-05-20T23:34:22Z">2022-05-20</time><h1>2022-05-21</h1></header><aside><p>Posted by <!-- --><a href="https://github.com/IkumaTadokoro">IkumaTadokoro</a> at <!-- --><a href="https://github.com/IkumaTadokoro/diary/issues/7">#7</a>.<!-- --></p></aside><div></div></section><article><section><header><time dateTime="2022-05-20T23:42:56Z" title="2022-05-20T23:42:56Z">2022-05-20</time></header><div><p>今日のesa拡張の日報がない場合のリンクがHomeへのリンクになっている。</p>
<p>→ オプションで指定したチーム名とかがなくなっていた。
→ 再起動でなくなる？そんなことないと思うけど、一応明日確認</p></div></section></article><article><section><header><time dateTime="2022-05-20T23:48:56Z" title="2022-05-20T23:48:56Z">2022-05-20</time></header><div><p>毎日のログを作成するときに、天気と適当なRSSフィードで作ってくれると嬉しいな。</p>
<p>IssueをGitHub Actionsで作るのは造作もないけれど、各種情報をどこまでとってくるかって感じ</p></div></section></article><article><section><header><time dateTime="2022-05-21T00:57:42Z" title="2022-05-21T00:57:42Z">2022-05-21</time></header><div><p><a href="https://open.spotify.com/episode/7FyQqWPds37ysNTQrczr6f?si=g9O5Ay-3Ryyp4IxQnLV3BQ&#x26;utm_source=copy-link">https://open.spotify.com/episode/7FyQqWPds37ysNTQrczr6f?si=g9O5Ay-3Ryyp4IxQnLV3BQ&#x26;utm_source=copy-link</a></p>
<ul>
<li>テストで設計を作る</li>
<li>目的はFBサイクルを高速に回すこと</li>
</ul></div></section></article><article><section><header><time dateTime="2022-05-21T01:00:01Z" title="2022-05-21T01:00:01Z">2022-05-21</time></header><div><p>tech系ポッドキャストのリストを登録すると、Spotifyのプレイリストにどんどん積み上がるやつほしい。</p>
<p>プレイリストは月単位で</p></div></section></article><article><section><header><time dateTime="2022-05-21T01:25:51Z" title="2022-05-21T01:25:51Z">2022-05-21</time></header><div><p><a href="https://twitter.com/soutaro/status/1527651384572911619?t=tn8Kfu3e1we5cbbXI9pq5g&#x26;s=19">https://twitter.com/soutaro/status/1527651384572911619?t=tn8Kfu3e1we5cbbXI9pq5g&#x26;s=19</a></p></div></section></article><article><section><header><time dateTime="2022-05-21T03:33:02Z" title="2022-05-21T03:33:02Z">2022-05-21</time></header><div><p>新聞</p>
<p><a href="https://y-yagi.hatenablog.com/entry/2022/05/21/045327">rails commit log流し読み(2022/05/20) - なるようになるブログ</a></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked disabled> readonly-columnに対して、touchを行う</li>
<li class="task-list-item"><input type="checkbox" checked disabled> rails new時のcredentialsのdiff?</li>
<li class="task-list-item"><input type="checkbox" checked disabled> ログローテートの仕組み</li>
<li class="task-list-item"><input type="checkbox" checked disabled> inclusivity/exclusivity validator</li>
<li class="task-list-item"><input type="checkbox" disabled> （難しい）threadの話</li>
</ul>
<h3>readonlyなcolumnに対して、touchを行う</h3>
<ul>
<li>readonlyなcolumn:
<ul>
<li><a href="https://api.rubyonrails.org/classes/ActiveRecord/ReadonlyAttributes/ClassMethods.html">ActiveRecord::ReadonlyAttributes::ClassMethods</a></li>
<li>ActiveRecordの文脈で、新しい値の設定はできるけど、更新はできなくなるように設定できる。</li>
</ul>
</li>
<li><code>touch</code>:
<ul>
<li><a href="https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-touch">ActiveRecord::Persistence</a></li>
<li>更新日時だけをupdateするメソッド</li>
</ul>
</li>
<li>つまり、本来updateができないはずの<code>attr_readonly</code>に対して、<code>touch</code>による更新日時の更新ができちゃうよ、というのがこのPRの内容。</li>
</ul>
<h3>rails new時のcredentialsのdiff</h3>
<ul>
<li><code>rails credentials:diff --enroll</code>というコマンドがそもそもあるのでそこから。
<ul>
<li><code>rails credentials</code>3兄弟、<code>edit</code>、<code>show</code>、<code>diff</code></li>
<li><code>diff</code>は暗号化ファイルのdiffを見れるようにするコマンド（暗号化されているので、そのままgit diffをしても、意味のある内容は表示されない）</li>
<li><code>rails credentials:diff --enroll</code>を実行することで、.gitattributesに設定が追記され、その後<code>bin/rails credentials:edit</code>を実行すると、<code>.git/config</code>にも設定が追記される。これで<code>git diff</code>を実行した際に復号化した状態でdiffが参照できるようになる。</li>
<li>...という手順を踏まないといけないので、便利だけど気づいていない人も多いよね、アプリを新規作成した際に（<code>rails new</code>した際に）自動でやっておくよ、というのが今回のPR</li>
<li><code>--skip-decrypted-diffs</code>でこの設定をスキップして作成もできる。</li>
</ul>
</li>
<li>参考：<a href="https://linyclar.github.io/rails_memos/commands/credentials/">bin/rails credentials · Linyclar</a></li>
</ul>
<h3>ログローテートの仕組み</h3>
<ul>
<li>もともとrails自体にはログローテーションの仕組みがある</li>
</ul>
<pre><code class="language-ruby">config.logger = Logger.new("log/production.log", "daily")
</code></pre>
<ul>
<li>今回はdevelopmentとtestのローテーション設定のデフォルト設定が100MB単位になった。</li>
</ul>
<h3>inclusivity/exclusivity validator</h3>
<ul>
<li><a href="https://api.rubyonrails.org/classes/ActiveModel/Validations/HelperMethods.html#method-i-validates_inclusion_of">ActiveModel::Validations::HelperMethods</a></li>
<li><a href="https://api.rubyonrails.org/classes/ActiveModel/Validations/HelperMethods.html#method-i-validates_inclusion_of">ActiveModel::Validations::HelperMethods</a></li>
<li>inclusionの方は範囲内、exclusionの方は範囲外であるかどうかをチェックする</li>
<li>指定するenumerableなオブジェクトに、beginless_rangeが指定できるようになったそう</li>
</ul></div></section></article><article><section><header><time dateTime="2022-05-21T06:10:27Z" title="2022-05-21T06:10:27Z">2022-05-21</time></header><div><p>プログラミングTypeScriptの5章を実際に書きながら読んでいく。 環境構築は次のような感じでやってみる。</p>
<ul>
<li>TypeScriptの導入</li>
</ul>
<pre><code class="language-bash">$ npm init

$ npm i -D typescript
$ tsc --init
</code></pre>
<ul>
<li>ESLintの導入</li>
</ul>
<pre><code class="language-bash">$ npm i --save-dev @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint-config-prettier
$ touch .eslinrc.yml
</code></pre>
<pre><code class="language-yaml">---
root: true
parser: "@typescript-eslint/parser"
plugins:
  - "@typescript-eslint"
extends:
  - eslint:recommended
  - plugin:@typescript-eslint/eslint-recommended
  - plugin:@typescript-eslint/recommended
  - prettier
</code></pre></div></section></article><article><section><header><time dateTime="2022-05-21T12:15:56Z" title="2022-05-21T12:15:56Z">2022-05-21</time></header><div><p>diaryの方が気軽すぎて、はてなブログでブログを書く気が失せてしまっている...。これは速く自前のサイトをもてということでしょうか。</p></div></section></article><article><section><header><time dateTime="2022-05-21T13:10:45Z" title="2022-05-21T13:10:45Z">2022-05-21</time></header><div><p>勉強会情報、Slackに流しても全然見ないからどうしようと思っていたけど、地域rbカレンダーをGoogleカレンダーに追加したら8割解決</p></div></section></article><article><section><header><time dateTime="2022-05-21T13:16:22Z" title="2022-05-21T13:16:22Z">2022-05-21</time></header><div><p>あとはtech playとconpassの新着イベントをfeedlyに登録して試合終了</p></div></section></article></article></main><footer><nav><ul><li><a href="/diary">Home</a></li></ul></nav></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"issue":{"body":"","bodyHTML":"","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7/comments","created_at":"2022-05-20T23:34:22Z","events_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7/events","html_url":"https://github.com/IkumaTadokoro/diary/issues/7","id":1243788195,"labels":[],"labels_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHWTPVs5KIrOj","number":7,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7/reactions"},"repository_url":"https://api.github.com/repos/IkumaTadokoro/diary","state":"open","state_reason":null,"timeline_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7/timeline","title":"2022-05-21","updated_at":"2022-05-20T23:34:22Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},"issueComments":[{"body":"今日のesa拡張の日報がない場合のリンクがHomeへのリンクになっている。\n\n→ オプションで指定したチーム名とかがなくなっていた。\n→ 再起動でなくなる？そんなことないと思うけど、一応明日確認\n","bodyHTML":"\u003cp\u003e今日のesa拡張の日報がない場合のリンクがHomeへのリンクになっている。\u003c/p\u003e\n\u003cp\u003e→ オプションで指定したチーム名とかがなくなっていた。\n→ 再起動でなくなる？そんなことないと思うけど、一応明日確認\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-20T23:42:56Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/7#issuecomment-1133467292","id":1133467292,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7","node_id":"IC_kwDOHWTPVs5Dj1ac","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133467292/reactions"},"updated_at":"2022-05-20T23:42:56Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133467292","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"毎日のログを作成するときに、天気と適当なRSSフィードで作ってくれると嬉しいな。\n\nIssueをGitHub Actionsで作るのは造作もないけれど、各種情報をどこまでとってくるかって感じ\n","bodyHTML":"\u003cp\u003e毎日のログを作成するときに、天気と適当なRSSフィードで作ってくれると嬉しいな。\u003c/p\u003e\n\u003cp\u003eIssueをGitHub Actionsで作るのは造作もないけれど、各種情報をどこまでとってくるかって感じ\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-20T23:48:56Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/7#issuecomment-1133469424","id":1133469424,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7","node_id":"IC_kwDOHWTPVs5Dj17w","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133469424/reactions"},"updated_at":"2022-05-20T23:48:56Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133469424","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"https://open.spotify.com/episode/7FyQqWPds37ysNTQrczr6f?si=g9O5Ay-3Ryyp4IxQnLV3BQ\u0026utm_source=copy-link\n\n- テストで設計を作る\n- 目的はFBサイクルを高速に回すこと\n","bodyHTML":"\u003cp\u003e\u003ca href=\"https://open.spotify.com/episode/7FyQqWPds37ysNTQrczr6f?si=g9O5Ay-3Ryyp4IxQnLV3BQ\u0026#x26;utm_source=copy-link\"\u003ehttps://open.spotify.com/episode/7FyQqWPds37ysNTQrczr6f?si=g9O5Ay-3Ryyp4IxQnLV3BQ\u0026#x26;utm_source=copy-link\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eテストで設計を作る\u003c/li\u003e\n\u003cli\u003e目的はFBサイクルを高速に回すこと\u003c/li\u003e\n\u003c/ul\u003e","author_association":"OWNER","created_at":"2022-05-21T00:57:42Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/7#issuecomment-1133488071","id":1133488071,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7","node_id":"IC_kwDOHWTPVs5Dj6fH","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133488071/reactions"},"updated_at":"2022-05-21T00:57:42Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133488071","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"tech系ポッドキャストのリストを登録すると、Spotifyのプレイリストにどんどん積み上がるやつほしい。\n\nプレイリストは月単位で","bodyHTML":"\u003cp\u003etech系ポッドキャストのリストを登録すると、Spotifyのプレイリストにどんどん積み上がるやつほしい。\u003c/p\u003e\n\u003cp\u003eプレイリストは月単位で\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-21T01:00:01Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/7#issuecomment-1133488441","id":1133488441,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7","node_id":"IC_kwDOHWTPVs5Dj6k5","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133488441/reactions"},"updated_at":"2022-05-21T01:00:01Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133488441","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"https://twitter.com/soutaro/status/1527651384572911619?t=tn8Kfu3e1we5cbbXI9pq5g\u0026s=19","bodyHTML":"\u003cp\u003e\u003ca href=\"https://twitter.com/soutaro/status/1527651384572911619?t=tn8Kfu3e1we5cbbXI9pq5g\u0026#x26;s=19\"\u003ehttps://twitter.com/soutaro/status/1527651384572911619?t=tn8Kfu3e1we5cbbXI9pq5g\u0026#x26;s=19\u003c/a\u003e\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-21T01:25:51Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/7#issuecomment-1133494021","id":1133494021,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7","node_id":"IC_kwDOHWTPVs5Dj78F","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133494021/reactions"},"updated_at":"2022-05-21T01:25:51Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133494021","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"新聞\n\n[rails commit log流し読み\\(2022/05/20\\) \\- なるようになるブログ](https://y-yagi.hatenablog.com/entry/2022/05/21/045327)\n\n- [x] readonly-columnに対して、touchを行う\n- [x] rails new時のcredentialsのdiff?\n- [x] ログローテートの仕組み\n- [x] inclusivity/exclusivity validator\n- [ ] （難しい）threadの話\n\n### readonlyなcolumnに対して、touchを行う\n\n- readonlyなcolumn:\n  - [ActiveRecord::ReadonlyAttributes::ClassMethods](https://api.rubyonrails.org/classes/ActiveRecord/ReadonlyAttributes/ClassMethods.html)\n  - ActiveRecordの文脈で、新しい値の設定はできるけど、更新はできなくなるように設定できる。\n- `touch`:\n  - [ActiveRecord::Persistence](https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-touch)\n  - 更新日時だけをupdateするメソッド\n- つまり、本来updateができないはずの`attr_readonly`に対して、`touch`による更新日時の更新ができちゃうよ、というのがこのPRの内容。\n\n### rails new時のcredentialsのdiff\n\n- `rails credentials:diff --enroll`というコマンドがそもそもあるのでそこから。\n  - `rails credentials`3兄弟、`edit`、`show`、`diff`\n  - `diff`は暗号化ファイルのdiffを見れるようにするコマンド（暗号化されているので、そのままgit diffをしても、意味のある内容は表示されない）\n  - `rails credentials:diff --enroll`を実行することで、.gitattributesに設定が追記され、その後`bin/rails credentials:edit`を実行すると、`.git/config`にも設定が追記される。これで`git diff`を実行した際に復号化した状態でdiffが参照できるようになる。\n  - ...という手順を踏まないといけないので、便利だけど気づいていない人も多いよね、アプリを新規作成した際に（`rails new`した際に）自動でやっておくよ、というのが今回のPR\n  - `--skip-decrypted-diffs`でこの設定をスキップして作成もできる。\n- 参考：[bin/rails credentials · Linyclar](https://linyclar.github.io/rails_memos/commands/credentials/)\n\n### ログローテートの仕組み\n\n- もともとrails自体にはログローテーションの仕組みがある\n\n```ruby\nconfig.logger = Logger.new(\"log/production.log\", \"daily\")\n```\n\n- 今回はdevelopmentとtestのローテーション設定のデフォルト設定が100MB単位になった。\n\n### inclusivity/exclusivity validator\n\n- [ActiveModel::Validations::HelperMethods](https://api.rubyonrails.org/classes/ActiveModel/Validations/HelperMethods.html#method-i-validates_inclusion_of)\n- [ActiveModel::Validations::HelperMethods](https://api.rubyonrails.org/classes/ActiveModel/Validations/HelperMethods.html#method-i-validates_inclusion_of)\n- inclusionの方は範囲内、exclusionの方は範囲外であるかどうかをチェックする\n- 指定するenumerableなオブジェクトに、beginless_rangeが指定できるようになったそう\n","bodyHTML":"\u003cp\u003e新聞\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://y-yagi.hatenablog.com/entry/2022/05/21/045327\"\u003erails commit log流し読み(2022/05/20) - なるようになるブログ\u003c/a\u003e\u003c/p\u003e\n\u003cul class=\"contains-task-list\"\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" checked disabled\u003e readonly-columnに対して、touchを行う\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" checked disabled\u003e rails new時のcredentialsのdiff?\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" checked disabled\u003e ログローテートの仕組み\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" checked disabled\u003e inclusivity/exclusivity validator\u003c/li\u003e\n\u003cli class=\"task-list-item\"\u003e\u003cinput type=\"checkbox\" disabled\u003e （難しい）threadの話\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ereadonlyなcolumnに対して、touchを行う\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ereadonlyなcolumn:\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://api.rubyonrails.org/classes/ActiveRecord/ReadonlyAttributes/ClassMethods.html\"\u003eActiveRecord::ReadonlyAttributes::ClassMethods\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eActiveRecordの文脈で、新しい値の設定はできるけど、更新はできなくなるように設定できる。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etouch\u003c/code\u003e:\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-touch\"\u003eActiveRecord::Persistence\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e更新日時だけをupdateするメソッド\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eつまり、本来updateができないはずの\u003ccode\u003eattr_readonly\u003c/code\u003eに対して、\u003ccode\u003etouch\u003c/code\u003eによる更新日時の更新ができちゃうよ、というのがこのPRの内容。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003erails new時のcredentialsのdiff\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003erails credentials:diff --enroll\u003c/code\u003eというコマンドがそもそもあるのでそこから。\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003erails credentials\u003c/code\u003e3兄弟、\u003ccode\u003eedit\u003c/code\u003e、\u003ccode\u003eshow\u003c/code\u003e、\u003ccode\u003ediff\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ediff\u003c/code\u003eは暗号化ファイルのdiffを見れるようにするコマンド（暗号化されているので、そのままgit diffをしても、意味のある内容は表示されない）\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003erails credentials:diff --enroll\u003c/code\u003eを実行することで、.gitattributesに設定が追記され、その後\u003ccode\u003ebin/rails credentials:edit\u003c/code\u003eを実行すると、\u003ccode\u003e.git/config\u003c/code\u003eにも設定が追記される。これで\u003ccode\u003egit diff\u003c/code\u003eを実行した際に復号化した状態でdiffが参照できるようになる。\u003c/li\u003e\n\u003cli\u003e...という手順を踏まないといけないので、便利だけど気づいていない人も多いよね、アプリを新規作成した際に（\u003ccode\u003erails new\u003c/code\u003eした際に）自動でやっておくよ、というのが今回のPR\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e--skip-decrypted-diffs\u003c/code\u003eでこの設定をスキップして作成もできる。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e参考：\u003ca href=\"https://linyclar.github.io/rails_memos/commands/credentials/\"\u003ebin/rails credentials · Linyclar\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eログローテートの仕組み\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eもともとrails自体にはログローテーションの仕組みがある\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-ruby\"\u003econfig.logger = Logger.new(\"log/production.log\", \"daily\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e今回はdevelopmentとtestのローテーション設定のデフォルト設定が100MB単位になった。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003einclusivity/exclusivity validator\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://api.rubyonrails.org/classes/ActiveModel/Validations/HelperMethods.html#method-i-validates_inclusion_of\"\u003eActiveModel::Validations::HelperMethods\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://api.rubyonrails.org/classes/ActiveModel/Validations/HelperMethods.html#method-i-validates_inclusion_of\"\u003eActiveModel::Validations::HelperMethods\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003einclusionの方は範囲内、exclusionの方は範囲外であるかどうかをチェックする\u003c/li\u003e\n\u003cli\u003e指定するenumerableなオブジェクトに、beginless_rangeが指定できるようになったそう\u003c/li\u003e\n\u003c/ul\u003e","author_association":"OWNER","created_at":"2022-05-21T03:33:02Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/7#issuecomment-1133521417","id":1133521417,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7","node_id":"IC_kwDOHWTPVs5DkCoJ","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133521417/reactions"},"updated_at":"2022-05-21T03:33:02Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133521417","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"プログラミングTypeScriptの5章を実際に書きながら読んでいく。 環境構築は次のような感じでやってみる。\n\n- TypeScriptの導入\n\n```bash\n$ npm init\n\n$ npm i -D typescript\n$ tsc --init\n```\n\n- ESLintの導入\n\n```bash\n$ npm i --save-dev @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint-config-prettier\n$ touch .eslinrc.yml\n```\n\n```yaml\n---\nroot: true\nparser: \"@typescript-eslint/parser\"\nplugins:\n  - \"@typescript-eslint\"\nextends:\n  - eslint:recommended\n  - plugin:@typescript-eslint/eslint-recommended\n  - plugin:@typescript-eslint/recommended\n  - prettier\n```\n","bodyHTML":"\u003cp\u003eプログラミングTypeScriptの5章を実際に書きながら読んでいく。 環境構築は次のような感じでやってみる。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTypeScriptの導入\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e$ npm init\n\n$ npm i -D typescript\n$ tsc --init\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eESLintの導入\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e$ npm i --save-dev @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint-config-prettier\n$ touch .eslinrc.yml\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"language-yaml\"\u003e---\nroot: true\nparser: \"@typescript-eslint/parser\"\nplugins:\n  - \"@typescript-eslint\"\nextends:\n  - eslint:recommended\n  - plugin:@typescript-eslint/eslint-recommended\n  - plugin:@typescript-eslint/recommended\n  - prettier\n\u003c/code\u003e\u003c/pre\u003e","author_association":"OWNER","created_at":"2022-05-21T06:10:27Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/7#issuecomment-1133544481","id":1133544481,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7","node_id":"IC_kwDOHWTPVs5DkIQh","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133544481/reactions"},"updated_at":"2022-05-21T06:10:27Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133544481","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"diaryの方が気軽すぎて、はてなブログでブログを書く気が失せてしまっている...。これは速く自前のサイトをもてということでしょうか。","bodyHTML":"\u003cp\u003ediaryの方が気軽すぎて、はてなブログでブログを書く気が失せてしまっている...。これは速く自前のサイトをもてということでしょうか。\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-21T12:15:56Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/7#issuecomment-1133610018","id":1133610018,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7","node_id":"IC_kwDOHWTPVs5DkYQi","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133610018/reactions"},"updated_at":"2022-05-21T12:15:56Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133610018","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"勉強会情報、Slackに流しても全然見ないからどうしようと思っていたけど、地域rbカレンダーをGoogleカレンダーに追加したら8割解決\n","bodyHTML":"\u003cp\u003e勉強会情報、Slackに流しても全然見ないからどうしようと思っていたけど、地域rbカレンダーをGoogleカレンダーに追加したら8割解決\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-21T13:10:45Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/7#issuecomment-1133631820","id":1133631820,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7","node_id":"IC_kwDOHWTPVs5DkdlM","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133631820/reactions"},"updated_at":"2022-05-21T13:10:45Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133631820","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"あとはtech playとconpassの新着イベントをfeedlyに登録して試合終了","bodyHTML":"\u003cp\u003eあとはtech playとconpassの新着イベントをfeedlyに登録して試合終了\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-21T13:16:22Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/7#issuecomment-1133632677","id":1133632677,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/7","node_id":"IC_kwDOHWTPVs5Dkdyl","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133632677/reactions"},"updated_at":"2022-05-21T13:16:22Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1133632677","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}}]},"__N_SSG":true},"page":"/articles/[issueNumber]","query":{"issueNumber":"7"},"buildId":"X3KZZqX0_vB1u2J0Y1362","assetPrefix":"/diary","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>