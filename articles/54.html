<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>2022-07-09</title><meta name="next-head-count" content="3"/><link rel="preload" href="/diary/_next/static/css/66a1e99d6a64689a.css" as="style"/><link rel="stylesheet" href="/diary/_next/static/css/66a1e99d6a64689a.css" data-n-g=""/><link rel="preload" href="/diary/_next/static/css/fc9624fd4a486ef2.css" as="style"/><link rel="stylesheet" href="/diary/_next/static/css/fc9624fd4a486ef2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/diary/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/diary/_next/static/chunks/webpack-3e7804591c667a30.js" defer=""></script><script src="/diary/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/diary/_next/static/chunks/main-a03413948affdc5e.js" defer=""></script><script src="/diary/_next/static/chunks/pages/_app-5b4d6b2692b4593b.js" defer=""></script><script src="/diary/_next/static/chunks/582-d79da0492f1f9267.js" defer=""></script><script src="/diary/_next/static/chunks/pages/articles/%5BissueNumber%5D-4584e21e841751ac.js" defer=""></script><script src="/diary/_next/static/kRMeQN0a9nf-AZBT2JPZ6/_buildManifest.js" defer=""></script><script src="/diary/_next/static/kRMeQN0a9nf-AZBT2JPZ6/_ssgManifest.js" defer=""></script><script src="/diary/_next/static/kRMeQN0a9nf-AZBT2JPZ6/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><script>window.twttr=(function(f,b,g){var e,c=f.getElementsByTagName(b)[0],a=window.twttr||{};if(f.getElementById(g)){return a}e=f.createElement(b);e.id=g;e.src="https://platform.twitter.com/widgets.js";c.parentNode.insertBefore(e,c);a._e=[];a.ready=function(d){a._e.push(d)};return a}(document,"script","twitter-wjs"));</script><div class="min-h-screen flex flex-col"><header class="relative bg-gradient-to-r from-blue-700 via-blue-800 to-gray-900 md:mb-8"><div class="max-w-6xl mx-auto px-5"><nav class="py-12 md:mb-20 flex items-center justify-between md:px-12 px-2"><div><h1 class="text-white"><a class="text-2xl md:text-3xl tracking-wide font-bold" href="/diary">ikuma-t/diary</a></h1><p class="mt-4 text-sm text-slate-300">ikuma-tの作業ログです。</p></div><div><a class="text-white text-sm" href="https://github.com/IkumaTadokoro/diary/issues">Show on GitHub</a></div></nav></div><svg class="absolute w-full h-20 md:h-full top-32 left-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" preserveAspectRatio="none"><path d="M0 32L24 37.3C48 43 96 53 144 74.7C192 96 240 128 288 122.7C336 117 384 75 432 80C480 85 528 139 576 133.3C624 128 672 64 720 53.3C768 43 816 85 864 90.7C912 96 960 64 1008 48C1056 32 1104 32 1152 58.7C1200 85 1248 139 1296 133.3C1344 128 1392 64 1416 32L1440 0V171H1416C1392 171 1344 171 1296 171C1248 171 1200 171 1152 171C1104 171 1056 171 1008 171C960 171 912 171 864 171C816 171 768 171 720 171C672 171 624 171 576 171C528 171 480 171 432 171C384 171 336 171 288 171C240 171 192 171 144 171C96 171 48 171 24 171H0V32Z" fill="white"></path></svg></header><main class="z-10 flex-1 py-8"><div class="max-w-2xl mx-auto"><article class="znc markdown"><section class="block py-6 md:px-12 px-8 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-09T11:24:30Z" title="2022-07-09T11:24:30Z">2022-07-09 11:07:00</time><h1 class="font-bold text-slate-600">2022-07-09</h1></header><aside><p class="text-sm text-slate-400">Posted by <!-- --> at <!-- --><a href="https://github.com/IkumaTadokoro/diary/issues/54">#54</a>.<!-- --></p></aside><div></div></section><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-09T11:28:23Z" title="2022-07-09T11:28:23Z">2022-07-09 11:07:00</time></header><div><p>Selenium実践入門を読んでいる</p>
<hr>
<p>留意事項</p>
<ul>
<li>Selenium WebDriver: 2.45.0</li>
<li>Selenium IDE: 2.9.0</li>
<li>Appium: 1.4.7</li>
<li>2015年12月時点の情報</li>
</ul>
<hr>
<p>書いてあること</p>
<ul>
<li>Seleniumの基礎知識</li>
<li>WebDriver</li>
<li>便利なライブラリ（Capybaraとかの話みたい）</li>
<li>Seleniumの活用法</li>
<li>実践的な運用</li>
</ul>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-09T11:51:32Z" title="2022-07-09T11:51:32Z">2022-07-09 11:07:00</time></header><div><h2 id="part1-selenium%E3%81%AE%E5%9F%BA%E7%A4%8E%E7%9F%A5%E8%AD%98"><a class="header-anchor-link" href="#part1-selenium%E3%81%AE%E5%9F%BA%E7%A4%8E%E7%9F%A5%E8%AD%98" aria-hidden="true" rel="nofollow"></a> Part1 Seleniumの基礎知識</h2>
<p>第1章はテストと自動化ツールを入れる意味について記述。第2章からが本番</p>
<p>Seleniumのユーザーコミュニティ</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fgroups.google.com%2Fg%2Fseleniumjp" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://groups.google.com/g/seleniumjp" style="display: none" rel="nofollow">https://groups.google.com/g/seleniumjp</a></p>
<p>Seleniumの構成は次の通り</p>
<ul>
<li>Selenium WebDriver(Selenium 1): プログラミング言語のコードからブラウザ操作が可能なライブラリ</li>
<li>Selenium RC(Selenium 2): WebDriverの前に生きていたやつ。互換性のために残っている（これ今も生きているのかな）</li>
<li>Selenium IDE: ブラウザ操作を記録して再生できるFirefoxのアドオン、って書いてあるけどChrome拡張版もあるな</li>
<li>Selenium Builder: Selenium IDEの光景を目指して開発されているみたい、いまはどうだろう？</li>
</ul>
<p>WebDriverのざっくりした説明</p>
<ul>
<li>クライアント側とサーバ側のロジックから構成されている。ここの間はJSON Wire ProtocolというHTTP通信で行われている</li>
<li>W3CでJSON Wire Protocolをもとにしたブラウザテストの標準使用WebDriver APIの策定がされている（もうできているのかな）</li>
<li>WebDriver APIではクライアント側ではローカルエンド、ブラウザ側はリモートエンドと呼ばれる</li>
</ul>
<p>とりあえず昨日調べたWebDriverのざっくりした構成とはあっていそう。<br>
WebDriver以外のIDEとかBuilderは時間があれば調べる感じにしようかな。</p>
</div></section></article><article class="mt-4"><section class="block py-6 px-8 md:px-12 bg-white md:rounded-lg border border-gray-200 shadow-md"><header><time class="text-xs text-gray-300 truncate" dateTime="2022-07-09T12:57:27Z" title="2022-07-09T12:57:27Z">2022-07-09 12:07:00</time></header><div><p>WebDriver</p>
<p>どぉらいばぁ〜</p>
<ul>
<li>WebDriverに対して、各種言語のSDKが提供されている</li>
<li>Selenium公式ライブラリと非公式ライブラリがあるみたい。Rubyは公式がある。</li>
<li>とりあえずRubyで書くか</li>
</ul>
<div class="code-block-container"><pre class="language-ruby"><code class="language-ruby">gem install selenium<span class="token operator">-</span>webdriver
</code></pre></div><p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2FSeleniumHQ%2Fselenium%2Ftree%2Ftrunk%2Frb" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://github.com/SeleniumHQ/selenium/tree/trunk/rb" style="display: none" rel="nofollow">https://github.com/SeleniumHQ/selenium/tree/trunk/rb</a></p>
<p>おお、Subversionから移行した感じがするブランチだ！かなり頻繁にメンテされているな〜。</p>
<div class="code-block-container"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">require</span> "selenium<span class="token operator">-</span>webdriver'

driver <span class="token operator">=</span> Selenium<span class="token double-colon punctuation">::</span>WebDriver<span class="token punctuation">.</span><span class="token keyword">for</span> <span class="token symbol">:firefox</span>
driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'http://example.selenium.jp/reserveApp'</span></span><span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span><span class="token symbol">:id</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'guestname).send_keys('</span></span>サンプルユーザ'<span class="token punctuation">)</span>
driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span><span class="token symbol">:id</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'goto_next'</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>click
driver<span class="token punctuation">.</span>quit
</code></pre></div><p>実行結果</p>
<div class="code-block-container"><pre class="language-bash"><code class="language-bash">$ ruby webdriver-sample-for-firefox.rb
webdriver-sample-for-firefox.rb:7: unterminated string meets end of <span class="token function">file</span>
driver.quit
</code></pre></div><p>あ、typoしてるわ。<code>'</code>が一個足りない。直したけど同じだ。FireFoxがないせいだと思って取り合えず追加する。<br>
あ〜、<code>require</code>のところもクォート間違えてたわ。ってことでここからRubyMineにしました。</p>
<div class="code-block-container"><pre class="language-bash"><code class="language-bash">.asdf/installs/ruby/3.1.2/lib/ruby/gems/3.1.0/gems/selenium-webdriver-4.3.0/lib/selenium/webdriver/common/service.rb:104:in `binary_path': Unable to <span class="token function">find</span> Mozilla geckodriver. Please download the server from <span class="token punctuation">(</span>Selenium::WebDriver::Error::WebDriverError<span class="token punctuation">)</span>
https://github.com/mozilla/geckodriver/releases and place it somewhere on your <span class="token environment constant">PATH</span><span class="token builtin class-name">.</span>
More info at https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver
</code></pre></div><p><code>Mozilla geckodriver</code>が見つからないと言われている。本にはそのまま動くと書いてあるけどつまりましたねぇ。いいですね。</p>
<p><code>https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver</code>を参照しようと思うけど、リンクがきれているな。</p>
<p>現状どうなっているか見ようと思ってcloneしているけど、リポジトリがデカすぎて全然終わらない。終わる感じはあるけど。</p>
<p>ダウンロードしている間にgeckodriverを追加する。月光？</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fja.wikipedia.org%2Fwiki%2FGecko" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://ja.wikipedia.org/wiki/Gecko" style="display: none" rel="nofollow">https://ja.wikipedia.org/wiki/Gecko</a></p>
<p>ああ「トッケイヤモリ」の方みたい。</p>
<blockquote>
<p>Gecko（ゲッコー）は、Netscapeシリーズ 6以降およびMozillaソフトウェアのために開発されたオープンソースのHTMLレンダリングエンジン群の総称である。HTML、CSS、XUL、JavaScriptなどを解釈する。</p>
</blockquote>
<p>はええ！</p>
<blockquote>
<p>当初、Mozillaは1998年に公開されたNetscape 5.0へ向けて開発中だったソースコードを元に開発されていたが[5]、軽量化のために当時買収したDigital Style社のエンジンをベースにして新規に書かれた。これがGeckoである。パース部分はW3Cによる勧告に合致することを目標に作成されている。</p>
</blockquote>
<p>エラーによって思わぬことを学んだ。バージョン履歴の5.0の次が57なのがなんか面白いな。</p>
<p>と調べている間にダウンロード終わって該当箇所が出てきた。</p>
<p>lib/selenium/webdriver/firefox/service.rb:29</p>
<p>2016年が最後。PR作るか〜。既存Issueがないか調べる。なさそう。<br>
というかこのアドレス、もともとはどこを表示したかったんだろう？それがわからないとPRの作りようがないんだけど。</p>
<p>魚拓はこれ。</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Farchive.ph%2F20170813105309%2Fhttps%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FQA%2FMarionette%2FWebDriver" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://archive.ph/20170813105309/https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver" style="display: none" rel="nofollow">https://archive.ph/20170813105309/https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver</a></p>
<p>ここが少し近いかな〜</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FLearn%2FTools_and_testing%2FCross_browser_testing%2FYour_own_automation_environment" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment" style="display: none" rel="nofollow">https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment</a></p>
<p>う〜ん、一旦保留にして進めるか。</p>
<hr>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fmozilla%2Fgeckodriver" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://github.com/mozilla/geckodriver" style="display: none" rel="nofollow">https://github.com/mozilla/geckodriver</a></p>
<p>これ更新めっちゃ止まっているけどいいのかな〜。まあ使ってみよう。</p>
<p><div class="embed-zenn-link"><iframe src="https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fmozilla%2Fgeckodriver%2Freleases%2Ftag%2Fv0.31.0" frameborder="0" scrolling="no" loading="lazy"></iframe></div><a href="https://github.com/mozilla/geckodriver/releases/tag/v0.31.0" style="display: none" rel="nofollow">https://github.com/mozilla/geckodriver/releases/tag/v0.31.0</a></p>
<p>これが最新版なので、ダウンロードして適当に配置</p>
<div class="code-block-container"><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:/path/to/geckodriver
</code></pre></div><p>これで再実行してみる。同じエラーが出てしまうなあ。</p>
</div></section></article></article></div></main><footer class="font-bold border-t-2 border-slate-100"><div class="max-w-6xl mx-auto px-5"><nav class="py-12"><ul class="flex justify-around text-white"><li><a href="/diary">Home</a></li><li><a href="https://ikuma-t.work">Blog</a></li></ul></nav></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"issue":{"body":"","bodyHTML":"","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/54/comments","created_at":"2022-07-09T11:24:30Z","events_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/54/events","html_url":"https://github.com/IkumaTadokoro/diary/issues/54","id":1299649042,"labels":[],"labels_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/54/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHWTPVs5NdxIS","number":54,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/54/reactions"},"repository_url":"https://api.github.com/repos/IkumaTadokoro/diary","state":"open","state_reason":null,"timeline_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/54/timeline","title":"2022-07-09","updated_at":"2022-07-09T11:24:30Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/54","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},"issueComments":[{"body":"Selenium実践入門を読んでいる\n\n---\n\n留意事項\n\n- Selenium WebDriver: 2.45.0\n- Selenium IDE: 2.9.0\n- Appium: 1.4.7\n- 2015年12月時点の情報\n\n---\n\n書いてあること\n\n- Seleniumの基礎知識\n- WebDriver\n- 便利なライブラリ（Capybaraとかの話みたい）\n- Seleniumの活用法\n- 実践的な運用\n","bodyHTML":"\u003cp\u003eSelenium実践入門を読んでいる\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e留意事項\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSelenium WebDriver: 2.45.0\u003c/li\u003e\n\u003cli\u003eSelenium IDE: 2.9.0\u003c/li\u003e\n\u003cli\u003eAppium: 1.4.7\u003c/li\u003e\n\u003cli\u003e2015年12月時点の情報\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003e書いてあること\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSeleniumの基礎知識\u003c/li\u003e\n\u003cli\u003eWebDriver\u003c/li\u003e\n\u003cli\u003e便利なライブラリ（Capybaraとかの話みたい）\u003c/li\u003e\n\u003cli\u003eSeleniumの活用法\u003c/li\u003e\n\u003cli\u003e実践的な運用\u003c/li\u003e\n\u003c/ul\u003e\n","author_association":"OWNER","created_at":"2022-07-09T11:28:23Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/54#issuecomment-1179527708","id":1179527708,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/54","node_id":"IC_kwDOHWTPVs5GTioc","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1179527708/reactions"},"updated_at":"2022-07-09T11:28:23Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1179527708","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"## Part1 Seleniumの基礎知識\n\n第1章はテストと自動化ツールを入れる意味について記述。第2章からが本番\n\nSeleniumのユーザーコミュニティ\n\nhttps://groups.google.com/g/seleniumjp\n\nSeleniumの構成は次の通り\n\n- Selenium WebDriver(Selenium 1): プログラミング言語のコードからブラウザ操作が可能なライブラリ\n- Selenium RC(Selenium 2): WebDriverの前に生きていたやつ。互換性のために残っている（これ今も生きているのかな）\n- Selenium IDE: ブラウザ操作を記録して再生できるFirefoxのアドオン、って書いてあるけどChrome拡張版もあるな\n- Selenium Builder: Selenium IDEの光景を目指して開発されているみたい、いまはどうだろう？\n\nWebDriverのざっくりした説明\n- クライアント側とサーバ側のロジックから構成されている。ここの間はJSON Wire ProtocolというHTTP通信で行われている\n- W3CでJSON Wire Protocolをもとにしたブラウザテストの標準使用WebDriver APIの策定がされている（もうできているのかな）\n- WebDriver APIではクライアント側ではローカルエンド、ブラウザ側はリモートエンドと呼ばれる\n\nとりあえず昨日調べたWebDriverのざっくりした構成とはあっていそう。\nWebDriver以外のIDEとかBuilderは時間があれば調べる感じにしようかな。\n","bodyHTML":"\u003ch2 id=\"part1-selenium%E3%81%AE%E5%9F%BA%E7%A4%8E%E7%9F%A5%E8%AD%98\"\u003e\u003ca class=\"header-anchor-link\" href=\"#part1-selenium%E3%81%AE%E5%9F%BA%E7%A4%8E%E7%9F%A5%E8%AD%98\" aria-hidden=\"true\" rel=\"nofollow\"\u003e\u003c/a\u003e Part1 Seleniumの基礎知識\u003c/h2\u003e\n\u003cp\u003e第1章はテストと自動化ツールを入れる意味について記述。第2章からが本番\u003c/p\u003e\n\u003cp\u003eSeleniumのユーザーコミュニティ\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgroups.google.com%2Fg%2Fseleniumjp\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://groups.google.com/g/seleniumjp\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://groups.google.com/g/seleniumjp\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eSeleniumの構成は次の通り\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSelenium WebDriver(Selenium 1): プログラミング言語のコードからブラウザ操作が可能なライブラリ\u003c/li\u003e\n\u003cli\u003eSelenium RC(Selenium 2): WebDriverの前に生きていたやつ。互換性のために残っている（これ今も生きているのかな）\u003c/li\u003e\n\u003cli\u003eSelenium IDE: ブラウザ操作を記録して再生できるFirefoxのアドオン、って書いてあるけどChrome拡張版もあるな\u003c/li\u003e\n\u003cli\u003eSelenium Builder: Selenium IDEの光景を目指して開発されているみたい、いまはどうだろう？\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWebDriverのざっくりした説明\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eクライアント側とサーバ側のロジックから構成されている。ここの間はJSON Wire ProtocolというHTTP通信で行われている\u003c/li\u003e\n\u003cli\u003eW3CでJSON Wire Protocolをもとにしたブラウザテストの標準使用WebDriver APIの策定がされている（もうできているのかな）\u003c/li\u003e\n\u003cli\u003eWebDriver APIではクライアント側ではローカルエンド、ブラウザ側はリモートエンドと呼ばれる\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eとりあえず昨日調べたWebDriverのざっくりした構成とはあっていそう。\u003cbr\u003e\nWebDriver以外のIDEとかBuilderは時間があれば調べる感じにしようかな。\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-07-09T11:51:32Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/54#issuecomment-1179530416","id":1179530416,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/54","node_id":"IC_kwDOHWTPVs5GTjSw","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1179530416/reactions"},"updated_at":"2022-07-09T11:51:32Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1179530416","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}},{"body":"WebDriver\n\nどぉらいばぁ〜\n\n- WebDriverに対して、各種言語のSDKが提供されている\n- Selenium公式ライブラリと非公式ライブラリがあるみたい。Rubyは公式がある。\n- とりあえずRubyで書くか\n\n```ruby\ngem install selenium-webdriver\n```\n\nhttps://github.com/SeleniumHQ/selenium/tree/trunk/rb\n\nおお、Subversionから移行した感じがするブランチだ！かなり頻繁にメンテされているな〜。\n\n```ruby\nrequire \"selenium-webdriver'\n\ndriver = Selenium::WebDriver.for :firefox\ndriver.get('http://example.selenium.jp/reserveApp')\ndriver.find_element(:id, 'guestname).send_keys('サンプルユーザ')\ndriver.find_element(:id, 'goto_next').click\ndriver.quit\n```\n\n実行結果\n\n```bash\n$ ruby webdriver-sample-for-firefox.rb\nwebdriver-sample-for-firefox.rb:7: unterminated string meets end of file\ndriver.quit\n```\n\nあ、typoしてるわ。`'`が一個足りない。直したけど同じだ。FireFoxがないせいだと思って取り合えず追加する。\nあ〜、`require`のところもクォート間違えてたわ。ってことでここからRubyMineにしました。\n\n```bash\n.asdf/installs/ruby/3.1.2/lib/ruby/gems/3.1.0/gems/selenium-webdriver-4.3.0/lib/selenium/webdriver/common/service.rb:104:in `binary_path': Unable to find Mozilla geckodriver. Please download the server from (Selenium::WebDriver::Error::WebDriverError)\nhttps://github.com/mozilla/geckodriver/releases and place it somewhere on your PATH.\nMore info at https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver\n```\n\n`Mozilla geckodriver`が見つからないと言われている。本にはそのまま動くと書いてあるけどつまりましたねぇ。いいですね。\n\n`https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver`を参照しようと思うけど、リンクがきれているな。\n\n現状どうなっているか見ようと思ってcloneしているけど、リポジトリがデカすぎて全然終わらない。終わる感じはあるけど。\n\nダウンロードしている間にgeckodriverを追加する。月光？\n\nhttps://ja.wikipedia.org/wiki/Gecko\n\nああ「トッケイヤモリ」の方みたい。\n\n\u003e Gecko（ゲッコー）は、Netscapeシリーズ 6以降およびMozillaソフトウェアのために開発されたオープンソースのHTMLレンダリングエンジン群の総称である。HTML、CSS、XUL、JavaScriptなどを解釈する。\n\nはええ！\n\n\u003e 当初、Mozillaは1998年に公開されたNetscape 5.0へ向けて開発中だったソースコードを元に開発されていたが[5]、軽量化のために当時買収したDigital Style社のエンジンをベースにして新規に書かれた。これがGeckoである。パース部分はW3Cによる勧告に合致することを目標に作成されている。\n\nエラーによって思わぬことを学んだ。バージョン履歴の5.0の次が57なのがなんか面白いな。\n\n\nと調べている間にダウンロード終わって該当箇所が出てきた。\n\nlib/selenium/webdriver/firefox/service.rb:29\n\n2016年が最後。PR作るか〜。既存Issueがないか調べる。なさそう。\nというかこのアドレス、もともとはどこを表示したかったんだろう？それがわからないとPRの作りようがないんだけど。\n\n魚拓はこれ。\n\nhttps://archive.ph/20170813105309/https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver\n\nここが少し近いかな〜\n\nhttps://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment\n\nう〜ん、一旦保留にして進めるか。\n\n---\n\nhttps://github.com/mozilla/geckodriver\n\nこれ更新めっちゃ止まっているけどいいのかな〜。まあ使ってみよう。\n\nhttps://github.com/mozilla/geckodriver/releases/tag/v0.31.0\n\nこれが最新版なので、ダウンロードして適当に配置\n\n```bash\nexport PATH=$PATH:/path/to/geckodriver\n```\n\nこれで再実行してみる。同じエラーが出てしまうなあ。\n","bodyHTML":"\u003cp\u003eWebDriver\u003c/p\u003e\n\u003cp\u003eどぉらいばぁ〜\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWebDriverに対して、各種言語のSDKが提供されている\u003c/li\u003e\n\u003cli\u003eSelenium公式ライブラリと非公式ライブラリがあるみたい。Rubyは公式がある。\u003c/li\u003e\n\u003cli\u003eとりあえずRubyで書くか\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"code-block-container\"\u003e\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby\"\u003egem install selenium\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ewebdriver\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2FSeleniumHQ%2Fselenium%2Ftree%2Ftrunk%2Frb\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://github.com/SeleniumHQ/selenium/tree/trunk/rb\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://github.com/SeleniumHQ/selenium/tree/trunk/rb\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eおお、Subversionから移行した感じがするブランチだ！かなり頻繁にメンテされているな〜。\u003c/p\u003e\n\u003cdiv class=\"code-block-container\"\u003e\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby\"\u003e\u003cspan class=\"token keyword\"\u003erequire\u003c/span\u003e \"selenium\u003cspan class=\"token operator\"\u003e-\u003c/span\u003ewebdriver'\n\ndriver \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Selenium\u003cspan class=\"token double-colon punctuation\"\u003e::\u003c/span\u003eWebDriver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token symbol\"\u003e:firefox\u003c/span\u003e\ndriver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eget\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e'http://example.selenium.jp/reserveApp'\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\ndriver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efind_element\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:id\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e'guestname).send_keys('\u003c/span\u003e\u003c/span\u003eサンプルユーザ'\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\ndriver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efind_element\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:id\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e'goto_next'\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eclick\ndriver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003equit\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e実行結果\u003c/p\u003e\n\u003cdiv class=\"code-block-container\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e$ ruby webdriver-sample-for-firefox.rb\nwebdriver-sample-for-firefox.rb:7: unterminated string meets end of \u003cspan class=\"token function\"\u003efile\u003c/span\u003e\ndriver.quit\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eあ、typoしてるわ。\u003ccode\u003e'\u003c/code\u003eが一個足りない。直したけど同じだ。FireFoxがないせいだと思って取り合えず追加する。\u003cbr\u003e\nあ〜、\u003ccode\u003erequire\u003c/code\u003eのところもクォート間違えてたわ。ってことでここからRubyMineにしました。\u003c/p\u003e\n\u003cdiv class=\"code-block-container\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e.asdf/installs/ruby/3.1.2/lib/ruby/gems/3.1.0/gems/selenium-webdriver-4.3.0/lib/selenium/webdriver/common/service.rb:104:in `binary_path': Unable to \u003cspan class=\"token function\"\u003efind\u003c/span\u003e Mozilla geckodriver. Please download the server from \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eSelenium::WebDriver::Error::WebDriverError\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nhttps://github.com/mozilla/geckodriver/releases and place it somewhere on your \u003cspan class=\"token environment constant\"\u003ePATH\u003c/span\u003e\u003cspan class=\"token builtin class-name\"\u003e.\u003c/span\u003e\nMore info at https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003ccode\u003eMozilla geckodriver\u003c/code\u003eが見つからないと言われている。本にはそのまま動くと書いてあるけどつまりましたねぇ。いいですね。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ehttps://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver\u003c/code\u003eを参照しようと思うけど、リンクがきれているな。\u003c/p\u003e\n\u003cp\u003e現状どうなっているか見ようと思ってcloneしているけど、リポジトリがデカすぎて全然終わらない。終わる感じはあるけど。\u003c/p\u003e\n\u003cp\u003eダウンロードしている間にgeckodriverを追加する。月光？\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fja.wikipedia.org%2Fwiki%2FGecko\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://ja.wikipedia.org/wiki/Gecko\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://ja.wikipedia.org/wiki/Gecko\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eああ「トッケイヤモリ」の方みたい。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eGecko（ゲッコー）は、Netscapeシリーズ 6以降およびMozillaソフトウェアのために開発されたオープンソースのHTMLレンダリングエンジン群の総称である。HTML、CSS、XUL、JavaScriptなどを解釈する。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eはええ！\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e当初、Mozillaは1998年に公開されたNetscape 5.0へ向けて開発中だったソースコードを元に開発されていたが[5]、軽量化のために当時買収したDigital Style社のエンジンをベースにして新規に書かれた。これがGeckoである。パース部分はW3Cによる勧告に合致することを目標に作成されている。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eエラーによって思わぬことを学んだ。バージョン履歴の5.0の次が57なのがなんか面白いな。\u003c/p\u003e\n\u003cp\u003eと調べている間にダウンロード終わって該当箇所が出てきた。\u003c/p\u003e\n\u003cp\u003elib/selenium/webdriver/firefox/service.rb:29\u003c/p\u003e\n\u003cp\u003e2016年が最後。PR作るか〜。既存Issueがないか調べる。なさそう。\u003cbr\u003e\nというかこのアドレス、もともとはどこを表示したかったんだろう？それがわからないとPRの作りようがないんだけど。\u003c/p\u003e\n\u003cp\u003e魚拓はこれ。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Farchive.ph%2F20170813105309%2Fhttps%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FQA%2FMarionette%2FWebDriver\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://archive.ph/20170813105309/https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://archive.ph/20170813105309/https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/WebDriver\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eここが少し近いかな〜\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FLearn%2FTools_and_testing%2FCross_browser_testing%2FYour_own_automation_environment\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eう〜ん、一旦保留にして進めるか。\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fmozilla%2Fgeckodriver\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://github.com/mozilla/geckodriver\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://github.com/mozilla/geckodriver\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eこれ更新めっちゃ止まっているけどいいのかな〜。まあ使ってみよう。\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"embed-zenn-link\"\u003e\u003ciframe src=\"https://card.zenn.dev/?url=https%3A%2F%2Fgithub.com%2Fmozilla%2Fgeckodriver%2Freleases%2Ftag%2Fv0.31.0\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003ca href=\"https://github.com/mozilla/geckodriver/releases/tag/v0.31.0\" style=\"display: none\" rel=\"nofollow\"\u003ehttps://github.com/mozilla/geckodriver/releases/tag/v0.31.0\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eこれが最新版なので、ダウンロードして適当に配置\u003c/p\u003e\n\u003cdiv class=\"code-block-container\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token builtin class-name\"\u003eexport\u003c/span\u003e \u003cspan class=\"token assign-left variable\"\u003e\u003cspan class=\"token environment constant\"\u003ePATH\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token environment constant\"\u003e$PATH\u003c/span\u003e:/path/to/geckodriver\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eこれで再実行してみる。同じエラーが出てしまうなあ。\u003c/p\u003e\n","author_association":"OWNER","created_at":"2022-07-09T12:57:27Z","html_url":"https://github.com/IkumaTadokoro/diary/issues/54#issuecomment-1179539181","id":1179539181,"issue_url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/54","node_id":"IC_kwDOHWTPVs5GTlbt","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1179539181/reactions"},"updated_at":"2022-07-09T12:57:27Z","url":"https://api.github.com/repos/IkumaTadokoro/diary/issues/comments/1179539181","user":{"avatar_url":"https://avatars.githubusercontent.com/u/61409641?v=4","events_url":"https://api.github.com/users/IkumaTadokoro/events{/privacy}","followers_url":"https://api.github.com/users/IkumaTadokoro/followers","following_url":"https://api.github.com/users/IkumaTadokoro/following{/other_user}","gists_url":"https://api.github.com/users/IkumaTadokoro/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/IkumaTadokoro","id":61409641,"login":"IkumaTadokoro","node_id":"MDQ6VXNlcjYxNDA5NjQx","organizations_url":"https://api.github.com/users/IkumaTadokoro/orgs","received_events_url":"https://api.github.com/users/IkumaTadokoro/received_events","repos_url":"https://api.github.com/users/IkumaTadokoro/repos","site_admin":false,"starred_url":"https://api.github.com/users/IkumaTadokoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IkumaTadokoro/subscriptions","type":"User","url":"https://api.github.com/users/IkumaTadokoro"}}]},"__N_SSG":true},"page":"/articles/[issueNumber]","query":{"issueNumber":"54"},"buildId":"kRMeQN0a9nf-AZBT2JPZ6","assetPrefix":"/diary","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>